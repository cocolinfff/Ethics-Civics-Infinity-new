
# 厚积薄发
namespace = ethic_advanced_start
planet_event = {
    id = ethic_advanced_start.0
    hide_window = yes
    is_triggered_only = yes
    immediate = {
        if = {
            limit = { owner = { has_origin = origin_advanced_start } }
            owner = {
                random_list = {
                    1 = { set_variable = { which = system_count value = 2 } }
                    1 = { set_variable = { which = system_count value = 3 } }
                    1 = { set_variable = { which = system_count value = 4 } }
                    1 = { set_variable = { which = system_count value = 5 } }
                    1 = { set_variable = { which = system_count value = 6 } }
                }
                country_event = { id = game_start.6 }
            }
            planet_event = { id = game_start.20 }
            planet_event = { id = game_start.22 }
            planet_event = { id = game_start.23 }
            create_fleet = {
                set_take_point = yes
                effect = {
                    set_owner = root.owner
                    random_list = {
                        1 = {
                            while = {
                                count = 3
                                create_ship = {
                                    name = random
                                    random_existing_design = corvette
                                }
                            }
                        }
                        1 = {
                            while = {
                                count = 4
                                create_ship = {
                                    name = random
                                    random_existing_design = corvette
                                }
                            }
                        }
                        1 = {
                            while = {
                                count = 5
                                create_ship = {
                                    name = random
                                    random_existing_design = corvette
                                }
                            }
                        }
                        1 = {
                            while = {
                                count = 6
                                create_ship = {
                                    name = random
                                    random_existing_design = corvette
                                }
                            }
                        }
                        1 = {
                            while = {
                                count = 7
                                create_ship = {
                                    name = random
                                    random_existing_design = corvette
                                }
                            }
                        }
                    }
                    random_list = {
                        1 = {
                            while = {
                                count = 1
                                create_ship = {
                                    name = random
                                    random_existing_design = destroyer
                                }
                            }
                        }
                        1 = {
                            while = {
                                count = 2
                                create_ship = {
                                    name = random
                                    random_existing_design = destroyer
                                }
                            }
                        }
                        1 = {
                            while = {
                                count = 3
                                create_ship = {
                                    name = random
                                    random_existing_design = destroyer
                                }
                            }
                        }
                    }
                    set_location = root.owner.capital_star
                }
            }
        }
    }
}
country_event = {
    id = ethic_advanced_start.1
    hide_window = yes
    is_triggered_only = yes
    trigger = { has_origin = origin_advanced_start }
    immediate = {
        every_owned_starbase = {
            limit = {
                always = yes
            }
            solar_system = {
                while = {
                    count = 1
                    every_neighbor_system = {
                        limit = {
                            has_owner = no
                            NOT = { has_star_flag = guardian }
                            NOT = { has_star_flag = wg_event_system }
                            NOT = {
                                any_neighbor_system = {
                                    starbase = {
                                        owner = { has_country_flag = fallen_empire_4 }
                                    }
                                }
                            }
                        }
                        create_starbase = {
                            size = starbase_outpost
                            owner = root
                        }
                    }
                }
            }
        }
        capital_scope = {
            add_deposit = d_ethic_space_industry_cluster_advanced_start
            if = {
                limit = {
                    root = {
                        NOR = {
                            has_government = gov_anarchic_society
                            has_government = gov_anarchocommunism
                            has_government = gov_anarchocapitalism
                        }
                    }
                }
                set_colony_type = col_capital_administrators
            }
            if = {
                limit = {
                    root = {
                        OR = {
                            has_government = gov_anarchic_society
                            has_government = gov_anarchocommunism
                            has_government = gov_anarchocapitalism
                        }
                    }
                }
                set_colony_type = col_capital_unity
            }


            #工业球
            solar_system = {
                if = {
                    limit = { has_star_flag = sol_system }
                    every_system_planet = {
                        limit = { has_planet_flag = planet_mars }
                        origin_advanced_start_industrial = yes
                    }
                }
                if = {
                    limit = { NOT = { has_star_flag = sol_system } }
                    random_system_planet = {
                        limit = {
                            is_ringworld = no
                            is_asteroid = no
                            is_star = no
                            is_moon = no
                            is_colony = no
                            NOT = {
                                is_planet_class = pc_gas_giant
                            }
                        }
                        origin_advanced_start_industrial = yes
                        set_name = random
                    }
                }
            }


            #电球
            solar_system = {
                if = {
                    limit = { has_star_flag = sol_system }
                    random_system_planet = {
                        limit = {
                            planet_size < 12
                            is_asteroid = no
                            is_moon = yes
                            is_colony = no
                        }
                        origin_advanced_start_energy = yes
                    }
                }
                if = {
                    limit = { NOT = { has_star_flag = sol_system } }
                    random_system_planet = {
                        limit = {
                            is_ringworld = no
                            is_asteroid = no
                            is_star = no
                            is_moon = no
                            is_colony = no
                            NOT = {
                                is_planet_class = pc_gas_giant
                            }
                        }
                        origin_advanced_start_energy = yes
                        set_name = random
                    }
                }
            }
        }
    }
}

# 异星歧途
namespace = ethic_true_yuht_start
planet_event = {
    id = ethic_true_yuht_start.0
    hide_window = yes
    is_triggered_only = yes
    immediate = {
        if = {
            limit = { owner = { has_origin = origin_true_yuht } }
            create_fleet = {
                set_take_point = yes
                effect = {
                    set_owner = root.owner
                    while = {
                        count = 17
                        create_ship = {
                            name = random
                            random_existing_design = corvette
                        }
                    }
                    while = {
                        count = 10
                        create_ship = {
                            name = random
                            random_existing_design = destroyer
                        }
                    }
                    set_location = root.owner.capital_star
                }
            }
        }
    }
}

# 回到未来
namespace = ethic_thirteen_monkeys
event = {
    id = ethic_thirteen_monkeys.0
    hide_window = yes
    is_triggered_only = yes

    immediate = {
        every_country = {
            limit = { has_origin = origin_thirteen_monkeys }
            if = {
                limit = {
                    NOT = { has_modifier = time_syndrome_country }
                }
                add_modifier = { modifier = time_syndrome_country years = 10 }
                while = {
                    count = 10
                    add_random_research_option = {
                        add_progress = 0.6
                        ignore_prereqs = yes
                        ignore_rare = no
                        area = engineering
                        tier = 1
                        fail_effects = {
                            add_random_research_option = {
                                add_progress = 0.6
                                ignore_prereqs = yes
                                ignore_rare = no
                                area = engineering
                                tier = 2
                                fail_effects = {
                                    add_random_research_option = {
                                        add_progress = 0.6
                                        ignore_prereqs = yes
                                        ignore_rare = no
                                        area = engineering
                                        tier = 3
                                        fail_effects = {
                                            add_random_research_option = {
                                                add_progress = 0.6
                                                ignore_prereqs = yes
                                                ignore_rare = no
                                                area = engineering
                                                tier = 4
                                                fail_effects = {
                                                    add_random_research_option = {
                                                        add_progress = 0.6
                                                        ignore_prereqs = yes
                                                        ignore_rare = no
                                                        area = engineering
                                                        tier = 5
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                    add_random_research_option = {
                        add_progress = 0.6
                        ignore_prereqs = yes
                        ignore_rare = no
                        area = physics
                        tier = 1
                        fail_effects = {
                            add_random_research_option = {
                                add_progress = 0.6
                                ignore_prereqs = yes
                                ignore_rare = no
                                area = physics
                                tier = 2
                                fail_effects = {
                                    add_random_research_option = {
                                        add_progress = 0.6
                                        ignore_prereqs = yes
                                        ignore_rare = no
                                        area = physics
                                        tier = 3
                                        fail_effects = {
                                            add_random_research_option = {
                                                add_progress = 0.6
                                                ignore_prereqs = yes
                                                ignore_rare = no
                                                area = physics
                                                tier = 4
                                                fail_effects = {
                                                    add_random_research_option = {
                                                        add_progress = 0.6
                                                        ignore_prereqs = yes
                                                        ignore_rare = no
                                                        area = physics
                                                        tier = 5
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                    add_random_research_option = {
                        add_progress = 0.6
                        ignore_prereqs = yes
                        ignore_rare = no
                        area = society
                        tier = 1
                        fail_effects = {
                            add_random_research_option = {
                                add_progress = 0.6
                                ignore_prereqs = yes
                                ignore_rare = no
                                area = society
                                tier = 2
                                fail_effects = {
                                    add_random_research_option = {
                                        add_progress = 0.6
                                        ignore_prereqs = yes
                                        ignore_rare = no
                                        area = society
                                        tier = 3
                                        fail_effects = {
                                            add_random_research_option = {
                                                add_progress = 0.6
                                                ignore_prereqs = yes
                                                ignore_rare = no
                                                area = society
                                                tier = 4
                                                fail_effects = {
                                                    add_random_research_option = {
                                                        add_progress = 0.6
                                                        ignore_prereqs = yes
                                                        ignore_rare = no
                                                        area = society
                                                        tier = 5
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
            every_owned_planet = {
                if = {
                    limit = {
                        NOT = { has_modifier = time_syndrome }
                    }
                    add_modifier = { modifier = time_syndrome years = 10 }
                    while = {
                        count = 10
                        create_pop = {
                            species = owner_main_species
                            ethos = random
                        }
                    }
                }
            }
        }
    }
}
planet_event = {
    id = ethic_thirteen_monkeys.1
    hide_window = yes
    is_triggered_only = yes

    trigger = {
        planet = { has_modifier = time_syndrome }
    }

    immediate = {
        kill_one_owner_species_pop = yes
    }
}

# 星空铁幕
namespace = eci_origin_galaxy_iron_curtain
country_event = {
    id = eci_origin_galaxy_iron_curtain.0
    hide_window = yes

    is_triggered_only = yes

    trigger = {
        owner = { has_origin = origin_galaxy_iron_curtain }
    }

    immediate = {
        set_country_type = eci_primitive
        remove_pre_ftl_flags = yes
        set_pre_ftl_age = atomic_age
        set_country_flag = atomic_age
        set_country_flag = recently_advanced
        eci_primitive_trade = yes
        capital_scope = {
            remove_all_buildings = yes
            add_building = building_primitive_capital
            add_building = building_commercial_zone
            add_building = building_luxury_residence
            add_building = building_luxury_residence
            add_building = building_luxury_residence
            add_building = building_luxury_residence
            add_deposit = d_decrepit_dwellings
            add_deposit = d_failing_infrastructure
            add_deposit = d_ethic_primitive_trade
            solar_system = {
                starbase = { fleet = { delete_fleet = this } }
            }
        }
        add_modifier = { modifier = patent_protection years = 99 }
        add_modifier = { modifier = energy_revolution years = 99 }
        add_modifier = { modifier = agriculturala_monopoly years = 99 }
        add_modifier = { modifier = mineral_finance years = 99 }
        add_modifier = { modifier = consumer_oligarch years = 99 }
        add_modifier = { modifier = steel_tycoon years = 99 }
    }
}
country_event = {
    id = eci_origin_galaxy_iron_curtain.1
    title = eci_origin_galaxy_iron_curtain.1.name
    desc = eci_origin_galaxy_iron_curtain.1.desc
    picture = GFX_evt_burning_city

    is_triggered_only = yes

    trigger = {
        owner = {
            has_origin = origin_galaxy_iron_curtain
            is_capitalism = no
            NOT = { has_country_flag = not_capitalism }
        }
    }

    immediate = {
        set_country_flag = not_capitalism
    }

    option = {
        name = eci_origin_galaxy_iron_curtain.1.a
        every_owned_planet = { add_planet_devastation = 15 }
        add_research_option = tech_planetary_government
        remove_modifier = energy_revolution
        remove_modifier = agriculturala_monopoly
        remove_modifier = mineral_finance
    }

    option = {
        name = eci_origin_galaxy_iron_curtain.1.b
        every_owned_planet = { add_planet_devastation = 50 }
        shift_ethic = ethic_fanatic_socialism
        add_research_option = tech_planetary_government
        remove_modifier = patent_protection
        remove_modifier = energy_revolution
        remove_modifier = agriculturala_monopoly
        remove_modifier = mineral_finance
        remove_modifier = consumer_oligarch
        remove_modifier = steel_tycoon
        hidden_effect = {
            if = {
                limit = { is_direct_democracy = yes }
                force_add_civic = civic_debug
                force_remove_civic = civic_debug
            }
        }
    }

    option = {
        name = eci_origin_galaxy_iron_curtain.1.c
        every_owned_planet = { add_planet_devastation = 5 }
        shift_ethic = ethic_fanatic_capitalism
        add_research_option = tech_planetary_government
        hidden_effect = {
            every_owned_pop = {
                random_list = {
                    9 = { }
                    1 = { kill_pop = yes }
                }
            }
        }
    }
}
country_event = {
    id = eci_origin_galaxy_iron_curtain.2
    title = eci_origin_galaxy_iron_curtain.2.name
    desc = eci_origin_galaxy_iron_curtain.2.desc
    picture = GFX_evt_early_space_age

    is_triggered_only = yes

    trigger = {
        owner = {
            has_origin = origin_galaxy_iron_curtain
            has_technology = tech_planetary_government
            OR = {
                has_technology = tech_warp_drive_1
                has_technology = tech_hyper_drive_1
            }
        }
    }

    immediate = {
        set_country_type = default
        remove_pre_ftl_flags = yes
        remove_country_flag = recently_advanced
        capital_scope = {
            remove_building = building_primitive_capital
            add_building = building_capital
            solar_system = {
                create_starbase = {
                    size = starbase_outpost
                    owner = root.owner
                }
            }
        }
        set_origin = origin_default
        remove_modifier = patent_protection
        if = {
            limit = { is_socialism = yes }
            remove_modifier = energy_revolution
            remove_modifier = agriculturala_monopoly
            remove_modifier = mineral_finance
            remove_modifier = consumer_oligarch
            remove_modifier = steel_tycoon
        }
        if = {
            limit = { is_direct_democracy = yes }
            force_add_civic = civic_debug
            force_remove_civic = civic_debug
        }
    }

    option = {
        name = eci_origin_galaxy_iron_curtain.2.a
        add_modifier = { modifier = look_into_the_future years = 15 }
    }
}

# 赡养上帝
namespace = taking_care_of_god
country_event = {
    id = taking_care_of_god.0
    title = taking_care_of_god.0.name
    desc = taking_care_of_god.0.desc
    picture = GFX_evt_acquire_asset
    is_triggered_only = yes
    trigger = { has_origin = origin_taking_care_of_god }
    immediate = {
        set_country_type = eci_primitive
        start_situation = { type = taking_care_of_god }
        eci_primitive_trade = yes
        capital_scope = {
            add_deposit = d_ethic_primitive_trade
            solar_system = {
                starbase = { fleet = { delete_fleet = this } }
            }
        }
        if = {
            limit = { is_ai = no }
            give_physics_research_option_tier_5_effect = yes
            give_engineering_research_option_tier_5_effect = yes
            give_society_research_option_tier_5_effect = yes
        }
        else_if = {
            limit = { is_ai = yes }
            add_modifier = { modifier = red_dawn_database_boot days = -1 }
            while = {
                count = 15
                add_random_research_option = {
                    add_progress = 0.6
                    ignore_prereqs = yes
                    area = engineering
                    tier = 1
                    fail_effects = {
                        add_random_research_option = {
                            add_progress = 0.6
                            ignore_prereqs = yes
                            area = engineering
                            tier = 2
                            fail_effects = {
                                add_random_research_option = {
                                    add_progress = 0.6
                                    ignore_prereqs = yes
                                    area = engineering
                                    tier = 3
                                    fail_effects = {
                                        add_random_research_option = {
                                            add_progress = 0.6
                                            ignore_prereqs = yes
                                            area = engineering
                                            tier = 4
                                            fail_effects = {
                                                add_random_research_option = {
                                                    add_progress = 0.6
                                                    ignore_prereqs = yes
                                                    area = engineering
                                                    tier = 5
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
                add_random_research_option = {
                    add_progress = 0.6
                    ignore_prereqs = yes
                    area = physics
                    tier = 1
                    fail_effects = {
                        add_random_research_option = {
                            add_progress = 0.6
                            ignore_prereqs = yes
                            area = physics
                            tier = 2
                            fail_effects = {
                                add_random_research_option = {
                                    add_progress = 0.6
                                    ignore_prereqs = yes
                                    area = physics
                                    tier = 3
                                    fail_effects = {
                                        add_random_research_option = {
                                            add_progress = 0.6
                                            ignore_prereqs = yes
                                            area = physics
                                            tier = 4
                                            fail_effects = {
                                                add_random_research_option = {
                                                    add_progress = 0.6
                                                    ignore_prereqs = yes
                                                    area = physics
                                                    tier = 5
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
                add_random_research_option = {
                    add_progress = 0.6
                    ignore_prereqs = yes
                    area = society
                    tier = 1
                    fail_effects = {
                        add_random_research_option = {
                            add_progress = 0.6
                            ignore_prereqs = yes
                            area = society
                            tier = 2
                            fail_effects = {
                                add_random_research_option = {
                                    add_progress = 0.6
                                    ignore_prereqs = yes
                                    area = society
                                    tier = 3
                                    fail_effects = {
                                        add_random_research_option = {
                                            add_progress = 0.6
                                            ignore_prereqs = yes
                                            area = society
                                            tier = 4
                                            fail_effects = {
                                                add_random_research_option = {
                                                    add_progress = 0.6
                                                    ignore_prereqs = yes
                                                    area = society
                                                    tier = 5
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
    option = {
        name = "taking_care_of_god.0.a"
    }
}
situation_event = {
    id = taking_care_of_god.1
    title = taking_care_of_god.1.name
    desc = taking_care_of_god.1.desc
    picture = GFX_evt_aggressive_flora
    is_triggered_only = yes
    immediate = {
        owner = {
            capital_scope = {
                add_modifier = { modifier = cost_of_freedom_12_b days = 1800 }
            }
        }
    }
    option = {
        name = "taking_care_of_god.1.a"
    }
    option = {
        name = "taking_care_of_god.1.b"
        hidden_effect = { owner = { set_country_flag = ethic_raising_the_elderly } }
    }
}
situation_event = {
    id = taking_care_of_god.2
    title = taking_care_of_god.2.name
    desc = taking_care_of_god.2.desc
    picture = GFX_evt_necrophage
    is_triggered_only = yes
    immediate = {
        owner = {
            capital_scope = {
                add_modifier = { modifier = broken_shackles_homeworld_found_08 days = 1800 }
            }
        }
    }
    option = {
        name = "taking_care_of_god.2.a"
    }
    option = {
        name = "taking_care_of_god.2.b"
        hidden_effect = { owner = { set_country_flag = ethic_raising_the_elderly } }
    }
}
situation_event = {
    id = taking_care_of_god.3
    title = taking_care_of_god.3.name
    desc = taking_care_of_god.3.desc
    picture = GFX_evt_shroudwalker_teachers
    is_triggered_only = yes
    immediate = {
        owner = {
            give_technology = { message = no tech = tech_planetary_government message = no }
            give_technology = { message = no tech = tech_holo_entertainment message = no }
        }
    }
    option = {
        name = "taking_care_of_god.3.a"
    }
    option = {
        name = "taking_care_of_god.3.b"
        hidden_effect = { owner = { set_country_flag = ethic_economic_problem } }
    }
}
situation_event = {
    id = taking_care_of_god.4
    title = taking_care_of_god.4.name
    desc = taking_care_of_god.4.desc
    picture = GFX_evt_early_space_age
    is_triggered_only = yes
    immediate = {
        owner = {
            give_technology = { message = no tech = tech_sublight_drive message = no }
            give_technology = { message = no tech = tech_space_construction message = no }
            give_technology = { message = no tech = tech_ship_armor_1 message = no }
            give_technology = { message = no tech = tech_starbase_2 message = no }
            create_fleet = {
                name = "NAME_Space_Station"
                effect = {
                    set_owner = root.owner
                    create_ship = {
                        name = "NAME_ISS_II"
                        design = "NAME_Space_Station"
                    }
                    set_location = root.owner.capital_scope
                }
            }
            create_fleet = {
                effect = {
                    set_owner = prev

                    create_ship = {
                        name = random
                        random_existing_design = science
                    }

                    set_fleet_stance = evasive
                    set_location = prev.capital_scope.star

                    owner = {
                        create_leader = {
                            class = scientist
                            sub_type = survey
                            name = random
                            species = owner_main_species
                        }
                    }
                    set_leader = last_created_leader
                }
            }
        }
    }
    option = {
        name = "taking_care_of_god.4.a"
    }
}
situation_event = {
    id = taking_care_of_god.5
    title = taking_care_of_god.5.name
    desc = taking_care_of_god.5.desc
    picture = GFX_evt_ship_travel
    is_triggered_only = yes
    immediate = {
        owner = {
            set_country_type = default
            give_technology = { message = no tech = tech_space_exploration message = no }
            give_technology = { message = no tech = tech_colonization_1 message = no }
            give_technology = { message = no tech = tech_assault_armies message = no }
            capital_scope = {
                solar_system = {
                    create_starbase = {
                        size = starbase_outpost
                        owner = root.owner
                    }
                }
            }
            create_fleet = {
                effect = {
                    set_owner = prev

                    create_ship = {
                        name = random
                        random_existing_design = science
                    }

                    set_fleet_stance = evasive
                    #set_location = prev.capital_star
                    set_location = prev.capital_scope.star

                    owner = {
                        create_leader = {
                            class = scientist
                            sub_type = survey
                            name = random
                            species = owner_main_species
                        }
                    }
                    set_leader = last_created_leader
                }
            }
            create_fleet = {
                effect = {
                    set_owner = prev

                    create_ship = {
                        name = random
                        random_existing_design = constructor
                    }

                    set_fleet_stance = evasive
                    set_location = prev.capital_star
                }
            }
        }
    }
    option = {
        name = "taking_care_of_god.5.a"
    }
}
country_event = {
    id = taking_care_of_god.100
    is_triggered_only = yes
    title = taking_care_of_god.100.name
    desc = taking_care_of_god.100.desc
    picture = GFX_evt_overt_indoctrination

    trigger = { NOT = { has_country_flag = taking_care_of_god_end } }

    immediate = {
        owner = {
            set_country_flag = taking_care_of_god_end
            give_technology = { message = no tech = tech_warp_drive_1 message = no }
            give_technology = { message = no tech = tech_shields_1 message = no }
            every_owned_planet = {
                every_owned_pop = {
                    limit = {
                        has_trait = trait_fallen_god
                    }
                    modify_species = {
                        species = this
                        remove_trait = trait_fallen_god
                        add_trait = trait_erudite
                    }
                }
            }
        }
        create_fleet = {
            name = "NAME_Payback_Warship_GOD"
            effect = {
                set_owner = root
                create_ship = {
                    name = "NAME_Payback_Warship_GOD"
                    design = "NAME_Payback_Warship_MSI"
                    graphical_culture = "slaver_01"
                    upgradable = no
                }
                set_location = root.capital_scope.star
            }
            settings = {
                spawn_debris = no
                can_upgrade = no
                can_change_composition = no
                uses_naval_capacity = no
            }
        }
        create_fleet = {
            name = "NAME_Payback_Warship_GOD"
            effect = {
                set_owner = root
                create_ship = {
                    name = "NAME_Payback_Warship_GOD"
                    design = "NAME_Payback_Warship_MSI"
                    graphical_culture = "slaver_01"
                    upgradable = no
                }
                set_location = root.capital_scope.star
            }
            settings = {
                spawn_debris = no
                can_upgrade = no
                can_change_composition = no
                uses_naval_capacity = no
            }
        }
        create_fleet = {
            name = "NAME_Payback_Warship_GOD"
            effect = {
                set_owner = root
                create_ship = {
                    name = "NAME_Payback_Warship_GOD"
                    design = "NAME_Payback_Warship_MSI"
                    graphical_culture = "slaver_01"
                    upgradable = no
                }
                set_location = root.capital_scope.star
            }
            settings = {
                spawn_debris = no
                can_upgrade = no
                can_change_composition = no
                uses_naval_capacity = no
            }
        }
    }

    option = {
        name = taking_care_of_god.100.a
    }
}
country_event = {
    id = taking_care_of_god.200
    is_triggered_only = yes
    title = taking_care_of_god.200.name
    desc = taking_care_of_god.200.desc
    picture = GFX_evt_payback

    trigger = { NOT = { has_country_flag = taking_care_of_god_end } }

    option = {
        name = taking_care_of_god.200.a
        hidden_effect = { country_event = { id = taking_care_of_god.201 } }
    }
}
country_event = {
    id = taking_care_of_god.201
    is_triggered_only = yes
    diplomatic = yes
    title = taking_care_of_god.201.name
    desc = taking_care_of_god.201.desc

    picture_event_data = {
        portrait = root
        room = ethic_spaceship_room
    }

    immediate = {
        hidden_effect = {
            set_country_type = default
            capital_scope = {
                solar_system = {
                    create_starbase = {
                        size = starbase_outpost
                        owner = root.owner
                    }
                }
                save_event_target_as = spawn_god_ship_planet
                solar_system = {
                    spawn_god_habitat = yes
                }
            }
        }
    }

    option = {
        name = taking_care_of_god.201.a
        response_text = taking_care_of_god.201.a.response
        is_dialog_only = yes
    }
    option = {
        name = taking_care_of_god.201.b
        response_text = taking_care_of_god.201.b.response
        is_dialog_only = yes
    }
    option = {
        name = taking_care_of_god.201.c
        response_text = taking_care_of_god.201.c.response
        is_dialog_only = yes
    }
    option = {
        name = taking_care_of_god.201.d
        response_text = taking_care_of_god.201.d.response
        is_dialog_only = yes
    }
    option = {
        name = taking_care_of_god.201.e
        response_text = taking_care_of_god.201.e.response
        is_dialog_only = yes
    }
    option = {
        name = taking_care_of_god.201.f
        response_text = taking_care_of_god.201.f.response
        hidden_effect = {
            set_country_flag = taking_care_of_god_end
            owner = {
                every_owned_planet = {
                    every_owned_pop = {
                        limit = {
                            has_trait = trait_fallen_god
                        }
                        kill_pop = yes
                    }
                }
            }
        }
    }
}

# 长夜余火
namespace = zarqlanism_idea_evt
event = {
    id = zarqlanism_idea_evt.1
    hide_window = yes
    is_triggered_only = yes

    immediate = {
        from = {
            if = {
                limit ={
                    is_fallen_empire_spiritualist =yes
                }
            }
            save_event_target_as = contact_empire
        }
        if = {
            limit = {
                from ={
                    is_fallen_empire_spiritualist =yes
                }
            }
            owner = {
                country_event = {
                    id = zarqlanism_idea_evt.10
                }
            }
        }
    }
}
country_event = {
    id = zarqlanism_idea_evt.10
    title = zarqlanism_idea_evt.10_title
    message_desc = zarqlanism_idea_evt.10.message
    # location = event_target:contact_empire.capital_scope
    is_triggered_only = yes

    diplomatic = yes
    trigger = {
        owner = {
            has_origin = origin_zarqlanism_idea
        }
    }
    picture_event_data = {
        portrait = event_target:contact_empire
        planet_background = event_target:contact_empire
        graphical_culture = event_target:contact_empire
        city_level = event_target:contact_empire
        room = event_target:contact_empire.ruler
    }

    desc = {
        text = "zarqlanism_idea_evt.10_a_desc"
        trigger = {
            first_contact_custom_greeting = no
            event_target:contact_empire = {
                is_country_type = fallen_empire
                has_ethic = ethic_fanatic_spiritualist
            }
            has_origin = origin_zarqlanism_idea
        }
    }

    option = {
        name = zarqlanism_idea_evt.10_option
    }
}

# 萌芽
namespace = life
country_event = {
    id = life.0
    hide_window = yes
    is_triggered_only = yes

    trigger = {
        has_origin = origin_sprout
    }

    immediate = {
        every_owned_planet = {
            limit = {
                has_planet_flag = origin_sprout
            }
            change_pc = pc_gaia
        }
        country_event = { id = life.1 days = 36000000000 random = 36000000000 }
    }
}
country_event = {
    id = life.1
    hide_window = yes
    is_triggered_only = yes

    trigger = {
        has_origin = origin_sprout
    }

    immediate = {
        every_owned_planet = {
            limit = {
                has_planet_flag = origin_sprout
            }
            if = {
                limit = { is_gestalt = no }
                add_building = building_crude_huts
                add_building = building_primitive_dwellings
            }
            if = {
                limit = { is_gestalt = yes }
                add_building = building_hive_crude_huts
                add_building = building_hive_primitive_dwellings
            }
            while = {
                count = 2
                create_pop = { species = owner_main_species }
            }
        }
        country_event = { id = life.2 days = 900000 random = 900000 }
    }
}
country_event = {
    id = life.2
    hide_window = yes
    is_triggered_only = yes

    trigger = {
        has_origin = origin_sprout
    }

    immediate = {
        every_owned_planet = {
            limit = {
                has_planet_flag = origin_sprout
            }
            if = {
                limit = { is_gestalt = no }
                remove_all_buildings = yes
                add_building = building_stone_palace
                add_building = building_primitive_dwellings
                add_building = building_primitive_dwellings
                add_building = building_primitive_dwellings
            }
            if = {
                limit = { is_gestalt = yes }
                remove_all_buildings = yes
                add_building = building_hive_stone_palace
                add_building = building_hive_primitive_dwellings
                add_building = building_hive_primitive_dwellings
                add_building = building_hive_primitive_dwellings
            }
            while = {
                count = 8
                create_pop = { species = owner_main_species }
            }
        }
        country_event = { id = life.3 days = 180000 random = 180000 }
    }
}
country_event = {
    id = life.3
    hide_window = yes
    is_triggered_only = yes

    trigger = {
        has_origin = origin_sprout
    }

    immediate = {
        every_owned_planet = {
            limit = {
                has_planet_flag = origin_sprout
            }
            if = {
                limit = { is_gestalt = no }
                remove_all_buildings = yes
                add_building = building_primitive_capital
                add_building = building_urban_dwellings
                add_building = building_primitive_mine
                add_building = building_primitive_power_plant
                add_building = building_primitive_farm
                add_building = building_primitive_factory
            }
            if = {
                limit = { is_gestalt = yes }
                remove_all_buildings = yes
                add_building = building_hive_primitive_capital
                add_building = building_hive_urban_dwellings
                add_building = building_hive_primitive_mine
                add_building = building_hive_primitive_power_plant
                add_building = building_hive_primitive_farm
                add_building = building_hive_primitive_factory
            }
            while = {
                count = 10
                create_pop = { species = owner_main_species }
            }
        }
        country_event = { id = life.4 days = 72000 random = 72000 }
    }
}
country_event = {
    id = life.4
    hide_window = yes
    is_triggered_only = yes

    trigger = {
        has_origin = origin_sprout
    }

    immediate = {
        set_country_type = default
        set_origin = origin_default
        every_owned_planet = {
            limit = {
                has_planet_flag = origin_sprout
            }
            remove_all_buildings = yes
            while = {
                count = 10
                create_pop = { species = owner_main_species }
            }
            add_building = building_capital
            solar_system = {
                create_starbase = {
                    size = starbase_outpost
                    owner = root.owner
                }
            }
            planet_event = { id = game_start.22 }
        }
    }
}

# 流浪星球
namespace = ethic_wander_planet
country_event = {
    id = ethic_wander_planet.0
    hide_window = yes
    is_triggered_only = yes
    trigger = {
        has_origin = origin_wandering_planet
        NOT = { has_global_flag = FBCIV_enable }
    }
    immediate = {
        set_country_type = default_ev
        if = {
            limit = {
                has_food_upkeep = yes
                is_catalytic_empire = no
            }
            create_fleet = {
                name = wandering_planet
                effect = {
                    set_location = root.capital_scope
                    set_owner = root
                    create_ship = {
                        name = wandering_planet
                        design = NAME_WANDERING_PLANET
                    }
                }
                settings = {
                    is_boss = no
                    can_change_leader = no
                    can_disband = no
                    can_change_composition = no
                    uses_naval_capacity = no
                    can_upgrade = no
                }
            }
            last_created_fleet = {
                every_owned_ship = {
                    set_name = {
                        key = ECIwanderplanet_home
                        variable_string = "[root.capital_scope.GetName]"
                    }
                }
            }
        }
        if = {
            limit = {
                has_food_upkeep = no
                is_catalytic_empire = no
            }
            create_fleet = {
                name = wandering_planet
                effect = {
                    set_location = root.capital_scope
                    set_owner = root
                    create_ship = {
                        name = wandering_planet
                        design = NAME_WANDERING_PLANET_NOT_FOOD
                    }
                }
                settings = {
                    is_boss = no
                    can_change_leader = no
                    can_disband = no
                    can_change_composition = no
                    uses_naval_capacity = no
                    can_upgrade = no
                }
            }
            last_created_fleet = {
                every_owned_ship = {
                    set_name = {
                        key = ECIwanderplanet_home
                        variable_string = "[root.capital_scope.GetName]"
                    }
                }
            }
        }
        if = {
            limit = { is_catalytic_empire = yes }
            create_fleet = {
                name = wandering_planet
                effect = {
                    set_location = root.capital_scope
                    set_owner = root
                    create_ship = {
                        name = wandering_planet
                        design = NAME_WANDERING_PLANET_IS_CATALYTIC_EMPIRE
                    }
                }
                settings = {
                    is_boss = no
                    can_change_leader = no
                    can_disband = no
                    can_change_composition = no
                    uses_naval_capacity = no
                    can_upgrade = no
                }
            }
            last_created_fleet = {
                every_owned_ship = {
                    set_name = {
                        key = ECIwanderplanet_home
                        variable_string = "[root.capital_scope.GetName]"
                    }
                }
            }
        }
        create_fleet = {
            effect = {
                set_owner = root
                create_ship = {
                    name = random
                    random_existing_design = explorer_vessel
                }
                set_fleet_stance = passive
                set_location = root.capital_scope
                owner = {
                    create_leader = {
                        class = scientist
                        sub_type = survey
                        name = random
                        species = owner_main_species
                    }
                }
                last_created_leader = {
                    add_trait = trait_ruler_home_in_the_sky
                }
                set_leader = last_created_leader
            }
        }
        create_fleet = {
            effect = {
                set_owner = root
                create_ship = {
                    name = random
                    random_existing_design = engineer_vessel
                }
                set_fleet_stance = evasive
                set_location = root.capital_scope
            }
        }
        capital_scope = {
            remove_planet = yes
            solar_system = {
                every_fleet_in_system = {
                    limit = {
                        OR = {
                            is_normal_starbase = yes
                            is_ship_size = starbase_starport
                        }
                    }
                    delete_fleet = this
                }
            }
        }
        country_event = { id = ethic_wander_planet.1 }
    }
}
country_event = {
    id = ethic_wander_planet.1
    title = ethic_wander_planet.1
    desc = ethic_wander_planet.1.desc
    picture = GFX_origin_wandering_planet
    is_triggered_only = yes
    immediate = {
        capital_star = {
            save_global_event_target_as = ECIwandering_planethomestar
        }
        country_event = {
            id = ethic_wander_planet.2
            days = 9000
        }
    }
    option = {
        name = ethic_wander_planet.1.a
        custom_tooltip = ethic_wander_planet.1.a_tooltip
    }
}
country_event = {
    id = ethic_wander_planet.2
    title = ethic_wander_planet.2
    desc = ethic_wander_planet.2.desc
    picture = GFX_evt_binary_stars
    is_triggered_only = yes
    immediate = {
        event_target:ECIwandering_planethomestar = {
            solar_system = {
                destroy_star_system = yes
                set_star_class = sc_neutron_star
                every_system_planet = {
                    limit = {
                        is_planet_class = pc_black_hole
                    }
                    change_pc = pc_neutron_star
                }
                if = {
                    limit = {
                        any_fleet_in_system = {
                            any_owned_ship = {
                                is_ship_size = wandering_planet
                            }
                        }
                    }
                    root = {
                        destroy_country = yes
                    }
                }
            }
        }
    }
    option = {
        name = ethic_wander_planet.2.a
    }
}
ship_event = {
    id = ethic_wander_planet.3
    title = ethic_wander_planet.3
    desc = ethic_wander_planet.3.desc
    picture = GFX_origin_wandering_planet
    is_triggered_only = yes
    trigger = {
        is_ship_size = wandering_planet
        fromfrom = {
            NOT = {
                has_country_flag = ECIwandering_planet_tanguole
            }
            has_origin = origin_wandering_planet
        }
        from = {
            NOT = {
                is_same_value = event_target:ECIwandering_planethomestar.solar_system
            }
        }
    }
    immediate = {
        owner = {
            set_country_flag = ECIwandering_planet_tanguole
        }
    }
    option = {
        name = ethic_wander_planet.3.a
        custom_tooltip = ethic_wander_planet.3.a_tooltip
        hidden_effect = {
            root.owner = {
                set_country_flag = ECIhomewanderplanet_shiptoplanet
            }
        }
    }
    option = {
        name = ethic_wander_planet.3.b
        custom_tooltip = ethic_wander_planet.3.b_tooltip
        hidden_effect = {
            owner = {
                country_event = {
                    id = ethic_wander_planet.5
                }
            }
        }
    }
}
country_event = {
    id = ethic_wander_planet.4
    title = ethic_wander_planet.4
    desc = ethic_wander_planet.4.desc
    picture = GFX_origin_wandering_planet
    is_triggered_only = yes
    trigger = {
        has_origin = origin_wandering_planet
        fromfrom = { is_ship_size = wandering_planet }
    }
    immediate = {
        solar_system = {
            spawn_planet = {
                class = pc_shattered
                location = fromfrom
                size = 20
            }
        }
        if = {
            limit = {
                OR = {
                    num_owned_planets > 0
                    any_owned_ship = {
                        OR = {
                            is_ship_size = mini_homeless_ship
                            is_ship_size = homeless_ship
                            is_ship_size = homeless_ship_starbase
                            is_ship_size = private_homeless_ship
                            is_ship_size = private_homeless_ship_starbase
                            is_ship_size = megastructures_homeless_ship
                            is_ship_size = ev_fleet_size_ship
                        }
                    }
                }
            }
            set_country_type = default
        }
        if = {
            limit = {
                num_owned_planets = 0
                any_owned_ship = {
                    NOR = {
                        is_ship_size = mini_homeless_ship
                        is_ship_size = homeless_ship
                        is_ship_size = homeless_ship_starbase
                        is_ship_size = private_homeless_ship
                        is_ship_size = private_homeless_ship_starbase
                        is_ship_size = megastructures_homeless_ship
                        is_ship_size = ev_fleet_size_ship
                    }
                }
            }
            destroy_country = yes
        }
    }
    option = {
        name = ethic_wander_planet.4.a
    }
}
country_event = {
    id = ethic_wander_planet.5
    hide_window = yes
    is_triggered_only = yes
    trigger = {
        has_origin = origin_wandering_planet
    }
    immediate = {
        random_owned_fleet = {
            limit = {
                any_owned_ship = {
                    is_ship_size = wandering_planet
                }
            }
            save_event_target_as = wandering_planetlocation
        }
        while = {
            count = 2
            create_fleet = {
                effect = {
                    set_owner = root
                    set_location = event_target:wandering_planetlocation
                    create_ship = {
                        random_existing_design = colonizer
                    }
                }
            }
        }
    }
}