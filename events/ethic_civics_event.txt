
# 荣誉策展人
namespace = honorary_curator
event = {
    id = honorary_curator.0
    hide_window = yes
    is_triggered_only = yes

    immediate = {
        every_country = {
            if = {
                limit = {
                    has_valid_civic = civic_honorary_curator
                }
                country_event = { id = honorary_curator.1 days = -1 }
                every_neighbor_country = {
                    limit = {
                        NOT = { has_ethic = ethic_gestalt_consciousness }
                        NOT = { has_country_flag = honorary_curator }
                    }
                    set_country_flag = honorary_curator
                    add_modifier = {
                        modifier = "honorary_curator"
                        days = 720
                    }
                }
            }
            if = {
                limit = {
                    has_valid_civic = civic_corporate_honorary_curator
                }
                country_event = { id = honorary_curator.3 days = 1 }
                every_neighbor_country = {
                    limit = {
                        NOT = { has_ethic = ethic_gestalt_consciousness }
                        NOT = { has_country_flag = corporate_honorary_curator }
                    }
                    set_country_flag = corporate_honorary_curator
                    add_modifier = {
                        modifier = "corporate_honorary_curator"
                        days = 720
                    }
                }
            }
        }
    }
}
country_event = {
    id = honorary_curator.1
    hide_window = yes
    is_triggered_only = yes

    trigger = {
        has_valid_civic = civic_honorary_curator
    }

    immediate = {
        every_neighbor_country = {
            limit = {
                NOT = {
                    has_ethic = ethic_gestalt_consciousness
                }
            }
            if = {
                limit = {
                    NOT = { has_country_flag = honorary_curator }
                }
                set_country_flag = honorary_curator
                add_modifier = {
                    modifier = "honorary_curator"
                    days = 360
                }
            }
            if = {
                limit = {
                    has_country_flag = honorary_curator
                    NOT = { has_modifier = honorary_curator }
                }
                remove_country_flag = honorary_curator
                add_modifier = {
                    modifier = "honorary_curator"
                    days = 360
                }
            }
        }
    }
}
country_event = {
    id = honorary_curator.2
    hide_window = yes
    is_triggered_only = yes

    trigger = {
        has_valid_civic = civic_honorary_curator
    }

    immediate = {
        every_neighbor_country = {
            limit = {
                NOT = {
                    has_ethic = ethic_gestalt_consciousness
                }
            }
            if = {
                limit = {
                    has_country_flag = honorary_curator
                    has_modifier = honorary_curator
                }
                remove_country_flag = honorary_curator
            }
        }
    }
}
# 银河展销会
country_event = {
    id = honorary_curator.3
    hide_window = yes
    is_triggered_only = yes

    trigger = {
        has_valid_civic = civic_corporate_honorary_curator
    }

    immediate = {
        every_neighbor_country = {
            limit = {
                NOT = {
                    has_ethic = ethic_gestalt_consciousness
                }
            }
            if = {
                limit = {
                    NOT = { has_country_flag = corporate_honorary_curator }
                }
                set_country_flag = corporate_honorary_curator
                add_modifier = {
                    modifier = "corporate_honorary_curator"
                    days = 360
                }
            }
            if = {
                limit = {
                    has_country_flag = corporate_honorary_curator
                    NOT = { has_modifier = corporate_honorary_curator }
                }
                remove_country_flag = corporate_honorary_curator
                add_modifier = {
                    modifier = "corporate_honorary_curator"
                    days = 360
                }
            }
        }
    }
}
country_event = {
    id = honorary_curator.4
    hide_window = yes
    is_triggered_only = yes

    trigger = {
        has_valid_civic = civic_corporate_honorary_curator
    }

    immediate = {
        every_neighbor_country = {
            limit = {
                NOT = {
                    has_ethic = ethic_gestalt_consciousness
                }
            }
            if = {
                limit = {
                    has_country_flag = corporate_honorary_curator
                    has_modifier = corporate_honorary_curator
                }
                remove_country_flag = corporate_honorary_curator
            }
        }
    }
}

# 后发先至
namespace = ethic_civic_procrastination
event = {
    id = ethic_civic_procrastination.0
    hide_window = yes
    is_triggered_only = yes
    immediate = {
        every_country = {
            limit = {
                has_civic = civic_procrastination
            }
            if = {
                limit = {
                    NOR = {
                        has_origin = origin_advanced_start
                        has_origin = origin_true_yuht
                    }
                }
                country_event = { id = ethic_civic_procrastination.1 days = 7200 }
            }
            if = {
                limit = {
                    OR = {
                        has_origin = origin_advanced_start
                        has_origin = origin_true_yuht
                    }
                }
                country_event = { id = ethic_civic_procrastination.1 }
            }
        }
    }
}
country_event = {
    id = ethic_civic_procrastination.1
    title = "ethic_civic_procrastination.name"
    desc = "ethic_civic_procrastination.desc"
    picture = GFX_evt_arguing_senate
    is_triggered_only = yes

    option = {
        name = "ethic_civic_procrastination.a"
        add_modifier = {
            modifier = ethic_civic_procrastination_1
            days = -1
        }
        force_remove_civic = civic_procrastination
        set_government_cooldown = no
    }

    option = {
        name = "ethic_civic_procrastination.b"
        custom_tooltip = ethic_civic_procrastination_effects
        hidden_effect = { country_event = { id = ethic_civic_procrastination.2 days = 7200 } }
    }
}
country_event = {
    id = ethic_civic_procrastination.2
    title = "ethic_civic_procrastination.name"
    desc = "ethic_civic_procrastination.desc"
    picture = GFX_evt_arguing_senate
    is_triggered_only = yes

    option = {
        name = "ethic_civic_procrastination.a"
        add_modifier = {
            modifier = ethic_civic_procrastination_2
            days = -1
        }
        force_remove_civic = civic_procrastination
        set_government_cooldown = no
    }

    option = {
        name = "ethic_civic_procrastination.b"
        custom_tooltip = ethic_civic_procrastination_effects
        hidden_effect = { country_event = { id = ethic_civic_procrastination.3 days = 7200 } }
    }
}
country_event = {
    id = ethic_civic_procrastination.3
    title = "ethic_civic_procrastination.name"
    desc = "ethic_civic_procrastination.desc"
    picture = GFX_evt_arguing_senate
    is_triggered_only = yes

    option = {
        name = "ethic_civic_procrastination.a"
        add_modifier = {
            modifier = ethic_civic_procrastination_3
            days = -1
        }
        force_remove_civic = civic_procrastination
        set_government_cooldown = no
    }

    option = {
        name = "ethic_civic_procrastination.b"
        custom_tooltip = ethic_civic_procrastination_effects
        hidden_effect = { country_event = { id = ethic_civic_procrastination.4 days = 7200 } }
    }
}
country_event = {
    id = ethic_civic_procrastination.4
    title = "ethic_civic_procrastination.name"
    desc = "ethic_civic_procrastination.desc"
    picture = GFX_evt_arguing_senate
    is_triggered_only = yes

    option = {
        name = "ethic_civic_procrastination.a"
        add_modifier = {
            modifier = ethic_civic_procrastination_4
            days = -1
        }
        force_remove_civic = civic_procrastination
        set_government_cooldown = no
    }

    option = {
        name = "ethic_civic_procrastination.b"
        custom_tooltip = ethic_civic_procrastination_effects
        hidden_effect = { country_event = { id = ethic_civic_procrastination.5 days = 7200 } }
    }
}
country_event = {
    id = ethic_civic_procrastination.5
    title = "ethic_civic_procrastination.name"
    desc = "ethic_civic_procrastination.desc"
    picture = GFX_evt_arguing_senate
    is_triggered_only = yes

    option = {
        name = "ethic_civic_procrastination.a"
        add_modifier = {
            modifier = ethic_civic_procrastination_5
            days = -1
        }
        force_remove_civic = civic_procrastination
        set_government_cooldown = no
    }

    option = {
        name = "ethic_civic_procrastination.b"
        custom_tooltip = ethic_civic_procrastination_effects
        hidden_effect = { country_event = { id = ethic_civic_procrastination.6 days = 7200 } }
    }
}
country_event = {
    id = ethic_civic_procrastination.6
    title = "ethic_civic_procrastination.name"
    desc = "ethic_civic_procrastination.desc"
    picture = GFX_evt_arguing_senate
    is_triggered_only = yes

    option = {
        name = "ethic_civic_procrastination.a"
        add_modifier = {
            modifier = ethic_civic_procrastination_6
            days = -1
        }
        force_remove_civic = civic_procrastination
        set_government_cooldown = no
    }

    option = {
        name = "ethic_civic_procrastination.b"
        custom_tooltip = ethic_civic_procrastination_effects
        hidden_effect = { country_event = { id = ethic_civic_procrastination.7 days = 7200 } }
    }
}
country_event = {
    id = ethic_civic_procrastination.7
    title = "ethic_civic_procrastination.name"
    desc = "ethic_civic_procrastination.desc"
    picture = GFX_evt_arguing_senate
    is_triggered_only = yes

    option = {
        name = "ethic_civic_procrastination.a"
        add_modifier = {
            modifier = ethic_civic_procrastination_7
            days = -1
        }
        force_remove_civic = civic_procrastination
        set_government_cooldown = no
    }

    option = {
        name = "ethic_civic_procrastination.b"
        custom_tooltip = ethic_civic_procrastination_effects
        hidden_effect = { country_event = { id = ethic_civic_procrastination.8 days = 7200 } }
    }
}
country_event = {
    id = ethic_civic_procrastination.8
    title = "ethic_civic_procrastination.name"
    desc = "ethic_civic_procrastination.desc"
    picture = GFX_evt_arguing_senate
    is_triggered_only = yes

    option = {
        name = "ethic_civic_procrastination.a"
        add_modifier = {
            modifier = ethic_civic_procrastination_8
            days = -1
        }
        force_remove_civic = civic_procrastination
        set_government_cooldown = no
    }

    option = {
        name = "ethic_civic_procrastination.b"
        custom_tooltip = ethic_civic_procrastination_effects
        hidden_effect = { country_event = { id = ethic_civic_procrastination.9 days = 7200 } }
    }
}
country_event = {
    id = ethic_civic_procrastination.9
    title = "ethic_civic_procrastination.name"
    desc = "ethic_civic_procrastination.desc"
    picture = GFX_evt_arguing_senate
    is_triggered_only = yes

    option = {
        name = "ethic_civic_procrastination.a"
        add_modifier = {
            modifier = ethic_civic_procrastination_9
            days = -1
        }
        force_remove_civic = civic_procrastination
        set_government_cooldown = no
    }

    option = {
        name = "ethic_civic_procrastination.b"
        custom_tooltip = ethic_civic_procrastination_effects
        hidden_effect = { country_event = { id = ethic_civic_procrastination.10 days = 7200 } }
    }
}
country_event = {
    id = ethic_civic_procrastination.10
    title = "ethic_civic_procrastination.name"
    desc = "ethic_civic_procrastination.desc"
    picture = GFX_evt_arguing_senate
    is_triggered_only = yes

    option = {
        name = "ethic_civic_procrastination.a"
        add_modifier = {
            modifier = ethic_civic_procrastination_10
            days = -1
        }
        force_remove_civic = civic_procrastination
        set_government_cooldown = no
    }
}

namespace = ethic_civic_yearly
# 朝闻道
country_event = {
    id = ethic_civic_yearly.2
    is_triggered_only = yes
    hide_window = yes

    trigger = {
        OR = {
            has_valid_civic = civic_zhaowen_dao
        }
    }

    immediate = {
        random_list = {
            90 = {	}
            10 = {
                country_event = { id = ethic_civic_yearly.20 }
            }
        }

    }
}
country_event = {
    id = ethic_civic_yearly.20
    is_triggered_only = yes
    desc = ethic_civic_yearly.20.desc
    title = ethic_civic_yearly.20.title
    immediate = {
        random_owned_leader = { save_event_target_as = dedication_leader }
    }
    option = {
        name = ethic_civic_yearly.20.a
        add_resource = {
            physics_research = 1000
            society_research = 1000
            engineering_research = 1000
            multiplier = event_target:dedication_leader.trigger:has_skill
        }
        event_target:dedication_leader = { kill_leader = { show_notification = no } }
    }
}

# 永远同在
country_event = {
    id = ethic_civic_yearly.3
    is_triggered_only = yes
    hide_window = yes

    trigger = {
        OR = {
            has_valid_civic = civic_forever_with_us
        }
    }

    immediate = {
        if = {
            limit = { NOT = { has_country_flag = vanguard_set_started } }
            set_variable = { which = vanguard_num value = 0 }
            set_country_flag = vanguard_set_started
        }
        capital_scope = {
            if = {
                limit = {
                    years_passed < 10
                    # NOT = { has_planet_flag = vanguard_star_yes }
                }
                add_vanguard_pop = { POSSIBILITY = 5 }
            }
            else_if = {
                limit = {
                    check_variable = { which = vanguard_num value < trigger:num_ascension_perks }
                    # NOT = { has_planet_flag = vanguard_star_yes }
                }
                add_vanguard_pop = { POSSIBILITY = 75 }
            }
            else = {
                # limit = { NOT = { has_planet_flag = vanguard_star_yes } }
                add_vanguard_pop = { POSSIBILITY = 10 }
            }
        }
    }
}
country_event = {
    id = ethic_civic_yearly.4
    is_triggered_only = yes
    desc = ethic_civic_yearly.4.desc
    title = ethic_civic_yearly.4.title
    trigger = {
        NOT = {
            has_country_flag = vanguard_no_window
        }
    }
    option = {
        name = ethic_civic_yearly.4.a
    }
    option = {
        name = ethic_civic_yearly.4.b
        hidden_effect = {
            set_country_flag = vanguard_no_window
        }
    }
}
planet_event = {
    id = ethic_civic_yearly.7
    is_triggered_only = yes
    hide_window = yes

    trigger = {
        planet.owner = {
            has_valid_civic = civic_forever_with_us
        }
    }

    immediate = {
        set_planet_flag = vanguard_star_yes
    }
}

# 调和主义
namespace = ethic_conciliatory
event = {
    id = ethic_conciliatory.1
    hide_window = yes
    is_triggered_only = yes
    immediate = {
        every_country = {
            limit = {
                has_valid_civic = civic_conciliatory
            }

            if = {
                limit = {
                    has_ethic = ethic_fanatic_spiritualist
                }
                add_modifier = {
                    modifier = conciliatory_ethic_fanatic_spiritualist
                    days = 360
                }
            }
            if = {
                limit = {
                    has_ethic = ethic_fanatic_materialist
                }
                add_modifier = {
                    modifier = conciliatory_ethic_fanatic_materialist
                    days = 360
                }
            }
            if = {
                limit = {
                    has_ethic = ethic_fanatic_militarist
                }
                add_modifier = {
                    modifier = conciliatory_ethic_fanatic_militarist
                    days = 360
                }
            }
            if = {
                limit = {
                    has_ethic = ethic_fanatic_pacifist
                }
                add_modifier = {
                    modifier = conciliatory_ethic_fanatic_pacifist
                    days = 360
                }
            }
            if = {
                limit = {
                    has_ethic = ethic_fanatic_authoritarian
                }
                add_modifier = {
                    modifier = conciliatory_ethic_fanatic_authoritarian
                    days = 360
                }
            }
            if = {
                limit = {
                    has_ethic = ethic_fanatic_egalitarian
                }
                add_modifier = {
                    modifier = conciliatory_ethic_fanatic_egalitarian
                    days = 360
                }
            }
            if = {
                limit = {
                    has_ethic = ethic_fanatic_xenophile
                }
                add_modifier = {
                    modifier = conciliatory_ethic_fanatic_xenophile
                    days = 360
                }
            }
            if = {
                limit = {
                    has_ethic = ethic_fanatic_xenophobe
                }
                add_modifier = {
                    modifier = conciliatory_ethic_fanatic_xenophobe
                    days = 360
                }
            }
            if = {
                limit = {
                    has_ethic = ethic_fanatic_socialism
                }
                add_modifier = {
                    modifier = conciliatory_ethic_fanatic_socialism
                    days = 360
                }
            }
            if = {
                limit = {
                    has_ethic = ethic_fanatic_capitalism
                }
                add_modifier = {
                    modifier = conciliatory_ethic_fanatic_capitalism
                    days = 360
                }
            }
        }
    }
}
country_event = {
    id = ethic_conciliatory.2
    hide_window = yes
    is_triggered_only = yes
    immediate = {
        every_country = {
            limit = {
                has_valid_civic = civic_conciliatory
            }

            if = {
                limit = {
                    has_ethic = ethic_fanatic_spiritualist
                }
                add_modifier = {
                    modifier = conciliatory_ethic_fanatic_spiritualist
                    days = 360
                }
            }
            if = {
                limit = {
                    has_ethic = ethic_fanatic_materialist
                }
                add_modifier = {
                    modifier = conciliatory_ethic_fanatic_materialist
                    days = 360
                }
            }
            if = {
                limit = {
                    has_ethic = ethic_fanatic_militarist
                }
                add_modifier = {
                    modifier = conciliatory_ethic_fanatic_militarist
                    days = 360
                }
            }
            if = {
                limit = {
                    has_ethic = ethic_fanatic_pacifist
                }
                add_modifier = {
                    modifier = conciliatory_ethic_fanatic_pacifist
                    days = 360
                }
            }
            if = {
                limit = {
                    has_ethic = ethic_fanatic_authoritarian
                }
                add_modifier = {
                    modifier = conciliatory_ethic_fanatic_authoritarian
                    days = 360
                }
            }
            if = {
                limit = {
                    has_ethic = ethic_fanatic_egalitarian
                }
                add_modifier = {
                    modifier = conciliatory_ethic_fanatic_egalitarian
                    days = 360
                }
            }
            if = {
                limit = {
                    has_ethic = ethic_fanatic_xenophile
                }
                add_modifier = {
                    modifier = conciliatory_ethic_fanatic_xenophile
                    days = 360
                }
            }
            if = {
                limit = {
                    has_ethic = ethic_fanatic_xenophobe
                }
                add_modifier = {
                    modifier = conciliatory_ethic_fanatic_xenophobe
                    days = 360
                }
            }
            if = {
                limit = {
                    has_ethic = ethic_fanatic_socialism
                }
                add_modifier = {
                    modifier = conciliatory_ethic_fanatic_socialism
                    days = 360
                }
            }
            if = {
                limit = {
                    has_ethic = ethic_fanatic_capitalism
                }
                add_modifier = {
                    modifier = conciliatory_ethic_fanatic_capitalism
                    days = 360
                }
            }
        }
    }
}

# 战争领主
namespace = ethic_military_dictatorship
country_event = {
    id = ethic_military_dictatorship.1
    hide_window = yes
    is_triggered_only = yes

    trigger = {
        has_valid_civic = civic_military_dictatorship
        subjects > 0
    }

    immediate = {
        set_variable = { which = military_dictatorship_num_subjects value = trigger:subjects }
        subtract_variable = { which = military_dictatorship_num_subjects value = 1 }
        every_subject = {
            add_modifier = {
                modifier = military_dictatorship_subjects_effect
                multiplier = PREV.military_dictatorship_num_subjects
            }
        }
        clear_variable = military_dictatorship_num_subjects
    }
}
country_event = {
    id = ethic_military_dictatorship.2
    title = "ethic_military_dictatorship.2.title"
    desc = {
        trigger = {
            NOT = { country_has_situation = { SITUATION = building_super_battleships } }
        }
        text = "ethic_military_dictatorship.2.desc"
    }
    desc = {
        trigger = {
            country_has_situation = { SITUATION = building_super_battleships }
        }
        text = "ethic_military_dictatorship.2.beta.desc"
    }
    picture = GFX_evt_arguing_senate
    is_triggered_only = yes

    trigger = {
        has_valid_civic = civic_military_dictatorship
    }

    option = {
        name = "ethic_military_dictatorship.2.a"
        trigger = {
            NOT = { country_has_situation = { SITUATION = building_super_battleships } }
        }
        hidden_effect = {
            custom_tooltip = ethic_military_dictatorship.2.a_effects
            start_situation = {
                type = building_super_battleships
            }
        }
    }

    option = {
        name = "ethic_military_dictatorship.2.a.beta"
        trigger = {
            country_has_situation = { SITUATION = building_super_battleships }
        }
        add_monthly_resource_mult = {
            resource = unity
            value = -6
        }
        add_monthly_resource_mult = {
            resource = influence
            value = -2
        }
    }

    option = {
        name = "ethic_military_dictatorship.2.b"
        hidden_effect = {
            custom_tooltip = ethic_military_dictatorship.2.b_effects
            add_modifier = { modifier = military_dictatorship_modifier days = -1 }
            if = {
                limit = {
                    country_has_situation = { SITUATION = building_super_battleships }
                }
                random_situation = {
                    limit = {
                        is_situation_type = building_super_battleships
                    }
                    destroy_situation = this
                }
                create_fleet = {
                    name = random
                    effect = {
                        set_owner = root
                        set_name = {
                            key = NAME_Royal_Fleet
                            variable_string = "[Root.GetRulerName]"
                        }
                        create_ship = {
                            name = random
                            random_existing_design = juggernaut
                        }
                        set_location = root.capital_scope.star
                    }
                }
                last_created_fleet = {
                    every_owned_ship = {
                        set_name = {
                            key = NAME_Royal_Ship
                            variable_string = "[Root.GetRulerTitle]"
                            variable_string = "[Root.GetRulerName]"
                        }
                    }
                }
            }
        }
    }
}
country_event = {
    id = ethic_military_dictatorship.3
    hide_window = yes
    is_triggered_only = yes

    trigger = {
        has_valid_civic = civic_military_dictatorship
    }

    immediate = {
        start_situation = {
            type = building_super_battleships
        }
    }
}

# 圣灵议会
namespace = ethic_spiritual_democracy
country_event = {
    id = ethic_spiritual_democracy.1
    hide_window = yes
    is_triggered_only = yes

    trigger = {
        has_valid_civic = civic_spiritual_democracy
    }

    immediate = {
        every_owned_leader = {
            limit = { is_councilor = yes }
            add_trait_no_notify = random_common
        }
    }
}

# 哲人王
namespace = ethic_philosopher_king
country_event = {
    id = ethic_philosopher_king.1
    hide_window = yes
    is_triggered_only = yes

    trigger = {
        has_valid_civic = civic_philosopher_king
    }

    immediate = {
        every_owned_leader = {
            limit = { is_ruler = yes }
            if = {
                limit = {
                    leader_class = official
                }
                random_list = {
                    10 = { add_trait_no_notify = leader_trait_spymaster }
                    10 = { add_trait_no_notify = leader_trait_totalitarian }
                    10 = { add_trait_no_notify = leader_trait_educator }
                    10 = { add_trait_no_notify = leader_trait_master_bureaucrat }
                    10 = { add_trait_no_notify = leader_trait_master_diplomat }
                    10 = { add_trait_no_notify = leader_trait_supreme_organizer }
                }
            }
            if = {
                limit = {
                    leader_class = scientist
                }
                random_list = {
                    10 = { add_trait_no_notify = leader_trait_educator }
                    10 = { add_trait_no_notify = leader_trait_master_bureaucrat }
                    10 = { add_trait_no_notify = leader_trait_knowledge_for_the_masses }
                    10 = { add_trait_no_notify = leader_trait_brilliant_shipwright }
                }
            }
            if = {
                limit = {
                    leader_class = commander
                }
                random_list = {
                    10 = { add_trait_no_notify = leader_trait_military_overseer }
                    10 = { add_trait_no_notify = leader_trait_armorer }
                    10 = { add_trait_no_notify = leader_trait_maven_of_war }
                    20 = { add_trait_no_notify = leader_trait_peacekeeper }
                    10 = { add_trait_no_notify = leader_trait_bellicose }
                    10 = { add_trait_no_notify = leader_trait_educator }
                    10 = { add_trait_no_notify = leader_trait_master_bureaucrat }
                }
            }
            if = {
                limit = {
                    NOT = { has_trait = leader_trait_legendary_leader }
                    owner = { has_ascension_perk = ap_engineered_evolution }
                }
                random_list = {
                    10 = { add_trait_no_notify = leader_trait_the_genetic_luminary }
                    90 = {}
                }
            }
            if = {
                limit = {
                    NOT = { has_trait = leader_trait_legendary_leader }
                    owner = { has_ascension_perk = ap_the_flesh_is_weak }
                }
                random_list = {
                    10 = { add_trait_no_notify = leader_trait_the_cybernetic_luminary }
                    90 = {}
                }
            }
            if = {
                limit = {
                    NOT = { has_trait = leader_trait_legendary_leader }
                    owner = { has_ascension_perk = ap_synthetic_evolution }
                }
                random_list = {
                    10 = { add_trait_no_notify = leader_trait_the_synth_luminary }
                    90 = {}
                }
            }
            if = {
                limit = {
                    NOT = { has_trait = leader_trait_legendary_leader }
                    owner = { has_ascension_perk = ap_mind_over_matter }
                }
                random_list = {
                    10 = { add_trait_no_notify = leader_trait_the_psionic_luminary }
                    90 = {}
                }
            }
            if = {
                limit = {
                    NOR = {
                        has_trait = leader_trait_legendary_leader
                        has_trait = leader_trait_legendary_offspring
                    }
                }
                random_list = {
                    10 = {
                        add_trait_no_notify = leader_trait_legendary_offspring
                        if = {
                            limit = {
                                owner = {
                                    NOT = { has_country_flag = philosopher_king_legendary_offspring }
                                }
                            }
                            owner = { set_country_flag = philosopher_king_legendary_offspring }
                        }
                        modifier = {
                            add = 90
                            owner = { has_country_flag = philosopher_king_legendary_offspring }
                        }
                    }
                    90 = {
                        modifier = {
                            factor = 0
                            owner = {
                                NOT = { has_country_flag = philosopher_king_legendary_offspring }
                            }
                        }
                    }
                }
            }
        }
    }
}
country_event = {
    id = ethic_philosopher_king.2
    hide_window = yes
    is_triggered_only = yes

    trigger = {
        has_valid_civic = civic_philosopher_king
        FROM = { is_ruler = yes }
    }

    immediate = {
        from = {
            if = {
                limit = {
                    leader_class = official
                }
                random_list = {
                    10 = { add_trait_no_notify = leader_trait_spymaster }
                    10 = { add_trait_no_notify = leader_trait_totalitarian }
                    10 = { add_trait_no_notify = leader_trait_educator }
                    10 = { add_trait_no_notify = leader_trait_master_bureaucrat }
                    10 = { add_trait_no_notify = leader_trait_master_diplomat }
                    10 = { add_trait_no_notify = leader_trait_supreme_organizer }
                }
            }
            if = {
                limit = {
                    leader_class = scientist
                }
                random_list = {
                    10 = { add_trait_no_notify = leader_trait_educator }
                    10 = { add_trait_no_notify = leader_trait_master_bureaucrat }
                    10 = { add_trait_no_notify = leader_trait_knowledge_for_the_masses }
                    10 = { add_trait_no_notify = leader_trait_brilliant_shipwright }
                }
            }
            if = {
                limit = {
                    leader_class = commander
                }
                random_list = {
                    10 = { add_trait_no_notify = leader_trait_military_overseer }
                    10 = { add_trait_no_notify = leader_trait_armorer }
                    10 = { add_trait_no_notify = leader_trait_maven_of_war }
                    20 = { add_trait_no_notify = leader_trait_peacekeeper }
                    10 = { add_trait_no_notify = leader_trait_bellicose }
                    10 = { add_trait_no_notify = leader_trait_educator }
                    10 = { add_trait_no_notify = leader_trait_master_bureaucrat }
                }
            }
            if = {
                limit = {
                    NOT = { has_trait = leader_trait_legendary_leader }
                    owner = { has_ascension_perk = ap_engineered_evolution }
                }
                random_list = {
                    10 = { add_trait_no_notify = leader_trait_the_genetic_luminary }
                    90 = {}
                }
            }
            if = {
                limit = {
                    NOT = { has_trait = leader_trait_legendary_leader }
                    owner = { has_ascension_perk = ap_the_flesh_is_weak }
                }
                random_list = {
                    10 = { add_trait_no_notify = leader_trait_the_cybernetic_luminary }
                    90 = {}
                }
            }
            if = {
                limit = {
                    NOT = { has_trait = leader_trait_legendary_leader }
                    owner = { has_ascension_perk = ap_synthetic_evolution }
                }
                random_list = {
                    10 = { add_trait_no_notify = leader_trait_the_synth_luminary }
                    90 = {}
                }
            }
            if = {
                limit = {
                    NOT = { has_trait = leader_trait_legendary_leader }
                    owner = { has_ascension_perk = ap_mind_over_matter }
                }
                random_list = {
                    10 = { add_trait_no_notify = leader_trait_the_psionic_luminary }
                    90 = {}
                }
            }
            if = {
                limit = {
                    NOR = {
                        has_trait = leader_trait_legendary_leader
                        has_trait = leader_trait_legendary_offspring
                    }
                }
                random_list = {
                    10 = {
                        add_trait_no_notify = leader_trait_legendary_offspring
                        if = {
                            limit = {
                                owner = {
                                    NOT = { has_country_flag = philosopher_king_legendary_offspring }
                                }
                            }
                            owner = { set_country_flag = philosopher_king_legendary_offspring }
                        }
                        modifier = {
                            add = 90
                            owner = { has_country_flag = philosopher_king_legendary_offspring }
                        }
                    }
                    90 = {
                        modifier = {
                            factor = 0
                            owner = {
                                NOT = { has_country_flag = philosopher_king_legendary_offspring }
                            }
                        }
                    }
                }
            }
        }
    }
}

# 国教崇拜
namespace = ethic_imperial_cult
country_event = {
    id = ethic_imperial_cult.0
    title = "ethic_imperial_cult.0.name"
    desc = "ethic_imperial_cult.0.desc"
    picture = GFX_evt_news_room
    show_sound = event_life_support_fail
    is_triggered_only = yes

    trigger = {
        exists = from
        from = {
            is_ruler = yes
        }
        this = { has_valid_civic = civic_imperial_cult }
    }

    option = {
        name = ethic_imperial_cult.0.a
        custom_tooltip = ethic_imperial_cult.a_effects
        add_modifier = { modifier = imperial_cult_modifier days = -1 }
        add_modifier = { modifier = imperial_cult_modifier_2 days = 360 }
    }
}

# 技官治国
namespace = ethic_technocracy
country_event = {
    id = ethic_technocracy.0
    hide_window = yes
    is_triggered_only = yes

    trigger = {
        has_valid_civic = civic_technocracy
    }

    immediate = {
        every_owned_leader = {
            if = {
                limit = {
                    leader_class = scientist
                    NOR = {
                        has_trait = leader_trait_expertise_voidcraft
                        has_trait = leader_trait_expertise_materials
                        has_trait = leader_trait_expertise_propulsion
                        has_trait = leader_trait_expertise_industry
                        has_trait = leader_trait_expertise_field_manipulation
                        has_trait = leader_trait_expertise_particles
                        has_trait = leader_trait_expertise_psionics
                        has_trait = leader_trait_expertise_computing
                        has_trait = leader_trait_expertise_new_worlds
                        has_trait = leader_trait_expertise_statecraft
                        has_trait = leader_trait_expertise_biology
                        has_trait = leader_trait_expertise_military_theory
                        has_trait = leader_trait_expertise_good_trading
                        has_trait = leader_trait_expertise_voidcraft_2
                        has_trait = leader_trait_expertise_materials_2
                        has_trait = leader_trait_expertise_propulsion_2
                        has_trait = leader_trait_expertise_industry_2
                        has_trait = leader_trait_expertise_field_manipulation_2
                        has_trait = leader_trait_expertise_particles_2
                        has_trait = leader_trait_expertise_psionics_2
                        has_trait = leader_trait_expertise_computing_2
                        has_trait = leader_trait_expertise_new_worlds_2
                        has_trait = leader_trait_expertise_statecraft_2
                        has_trait = leader_trait_expertise_biology_2
                        has_trait = leader_trait_expertise_military_theory_2
                        has_trait = leader_trait_expertise_good_trading_2
                        has_trait = leader_trait_expertise_voidcraft_3
                        has_trait = leader_trait_expertise_materials_3
                        has_trait = leader_trait_expertise_propulsion_3
                        has_trait = leader_trait_expertise_industry_3
                        has_trait = leader_trait_expertise_field_manipulation_3
                        has_trait = leader_trait_expertise_particles_3
                        has_trait = leader_trait_expertise_psionics_3
                        has_trait = leader_trait_expertise_computing_3
                        has_trait = leader_trait_expertise_new_worlds_3
                        has_trait = leader_trait_expertise_statecraft_3
                        has_trait = leader_trait_expertise_biology_3
                        has_trait = leader_trait_expertise_military_theory_3
                        has_trait = leader_trait_expertise_good_trading_3
                    }
                }
                random_list = {
                    10 = { add_trait_no_notify = leader_trait_expertise_voidcraft }
                    10 = { add_trait_no_notify = leader_trait_expertise_materials }
                    10 = { add_trait_no_notify = leader_trait_expertise_propulsion }
                    10 = { add_trait_no_notify = leader_trait_expertise_industry }
                    10 = { add_trait_no_notify = leader_trait_expertise_field_manipulation }
                    10 = { add_trait_no_notify = leader_trait_expertise_particles }
                    10 = { add_trait_no_notify = leader_trait_expertise_psionics }
                    10 = { add_trait_no_notify = leader_trait_expertise_computing }
                    10 = { add_trait_no_notify = leader_trait_expertise_new_worlds }
                    10 = { add_trait_no_notify = leader_trait_expertise_statecraft }
                    10 = { add_trait_no_notify = leader_trait_expertise_biology }
                    10 = { add_trait_no_notify = leader_trait_expertise_military_theory }
                    10 = { add_trait_no_notify = leader_trait_expertise_good_trading }
                }
            }
        }
    }
}
country_event = {
    id = ethic_technocracy.1
    hide_window = yes
    is_triggered_only = yes

    trigger = {
        has_valid_civic = civic_technocracy
        from = {
            leader_class = scientist
            NOR = {
                has_trait = leader_trait_expertise_voidcraft
                has_trait = leader_trait_expertise_materials
                has_trait = leader_trait_expertise_propulsion
                has_trait = leader_trait_expertise_industry
                has_trait = leader_trait_expertise_field_manipulation
                has_trait = leader_trait_expertise_particles
                has_trait = leader_trait_expertise_psionics
                has_trait = leader_trait_expertise_computing
                has_trait = leader_trait_expertise_new_worlds
                has_trait = leader_trait_expertise_statecraft
                has_trait = leader_trait_expertise_biology
                has_trait = leader_trait_expertise_military_theory
                has_trait = leader_trait_expertise_good_trading
                has_trait = leader_trait_expertise_voidcraft_2
                has_trait = leader_trait_expertise_materials_2
                has_trait = leader_trait_expertise_propulsion_2
                has_trait = leader_trait_expertise_industry_2
                has_trait = leader_trait_expertise_field_manipulation_2
                has_trait = leader_trait_expertise_particles_2
                has_trait = leader_trait_expertise_psionics_2
                has_trait = leader_trait_expertise_computing_2
                has_trait = leader_trait_expertise_new_worlds_2
                has_trait = leader_trait_expertise_statecraft_2
                has_trait = leader_trait_expertise_biology_2
                has_trait = leader_trait_expertise_military_theory_2
                has_trait = leader_trait_expertise_good_trading_2
                has_trait = leader_trait_expertise_voidcraft_3
                has_trait = leader_trait_expertise_materials_3
                has_trait = leader_trait_expertise_propulsion_3
                has_trait = leader_trait_expertise_industry_3
                has_trait = leader_trait_expertise_field_manipulation_3
                has_trait = leader_trait_expertise_particles_3
                has_trait = leader_trait_expertise_psionics_3
                has_trait = leader_trait_expertise_computing_3
                has_trait = leader_trait_expertise_new_worlds_3
                has_trait = leader_trait_expertise_statecraft_3
                has_trait = leader_trait_expertise_biology_3
                has_trait = leader_trait_expertise_military_theory_3
                has_trait = leader_trait_expertise_good_trading_3
            }
        }
    }

    immediate = {
        FROM = {
            random_list = {
                10 = { add_trait_no_notify = leader_trait_expertise_voidcraft }
                10 = { add_trait_no_notify = leader_trait_expertise_materials }
                10 = { add_trait_no_notify = leader_trait_expertise_propulsion }
                10 = { add_trait_no_notify = leader_trait_expertise_industry }
                10 = { add_trait_no_notify = leader_trait_expertise_field_manipulation }
                10 = { add_trait_no_notify = leader_trait_expertise_particles }
                10 = { add_trait_no_notify = leader_trait_expertise_psionics }
                10 = { add_trait_no_notify = leader_trait_expertise_computing }
                10 = { add_trait_no_notify = leader_trait_expertise_new_worlds }
                10 = { add_trait_no_notify = leader_trait_expertise_statecraft }
                10 = { add_trait_no_notify = leader_trait_expertise_biology }
                10 = { add_trait_no_notify = leader_trait_expertise_military_theory }
                10 = { add_trait_no_notify = leader_trait_expertise_good_trading }
            }
        }
    }
}

namespace = ethic_ynwd_event
# 乐土机械
country_event = {
    id = ethic_ynwd_event.1
    hide_window = yes
    is_triggered_only = yes

    trigger = { has_civic = civic_machine_paradise_lost }

    immediate = {
        give_technology = { tech = tech_terrestrial_sculpting }
        give_technology = { tech = tech_paradise_dome }
    }
}

# 失控机仆
country_event = {
    id = ethic_ynwd_event.2
    hide_window = yes
    is_triggered_only = yes

    trigger = { has_civic = civic_machine_servitor }

    immediate = {
        random_owned_pop = {
            limit = { has_citizenship_type = { type = citizenship_organic_trophy } }
            species = { set_species_flag = original_organic_species_of_@root }
        }
    }
}

# 征服者
namespace = glorious_fleet
country_event = {
    id = glorious_fleet.0
    hide_window = yes
    is_triggered_only = yes

    trigger = {
        has_valid_civic = civic_nationalistic_zeal
        NOT = { has_country_flag = glorious_fleet }
    }

    immediate = {
        add_modifier = {
            modifier = "glorious_fleet"
            days = 360
        }
        set_timed_country_flag = {
            flag = glorious_fleet
            days = 360
        }
        if = {
            limit = { has_country_flag = unglorious_fleet }
            remove_modifier = unglorious_fleet
            remove_country_flag = unglorious_fleet
        }
    }

}
country_event = {
    id = glorious_fleet.1
    hide_window = yes
    is_triggered_only = yes

    trigger = {
        has_valid_civic = civic_nationalistic_zeal
        NOT = { has_country_flag = unglorious_fleet }
    }

    immediate = {
        add_modifier = {
            modifier = "unglorious_fleet"
            days = 360
        }
        set_timed_country_flag = {
            flag = unglorious_fleet
            days = 360
        }
        if = {
            limit = { has_country_flag = glorious_fleet }
            remove_modifier = glorious_fleet
            remove_country_flag = glorious_fleet
        }
    }

}

# 普世主义
namespace = unity_patrons
country_event = {
    id = unity_patrons.1
    hide_window = yes
    is_triggered_only = yes
    location = ROOT

    trigger = {
        has_valid_civic = civic_peacekeepers
    }

    immediate = {
        add_modifier = {
            modifier = "unity_patrons"
            days = 3650
        }
    }

}

# 走近科学
namespace = ethic_techsetunity
country_event = {
    id = ethic_techsetunity.0
    hide_window = yes
    is_triggered_only = yes

    trigger = {
        has_valid_civic = civic_approaching_science
    }

    immediate = {
        add_monthly_resource_mult = {
            resource = unity
            value = 2
        }
    }
}

# 军阀共和国
namespace = eci_civic_citizen_service
country_event = {
    id = eci_civic_citizen_service.1
    hide_window = yes

    is_triggered_only = yes

    trigger = {
        has_valid_civic = civic_citizen_service
    }

    immediate = {
        owner = {
            add_monthly_resource_mult = {
                resource = unity
                value = 120
            }
        }
    }
}
country_event = {
    id = eci_civic_citizen_service.2
    hide_window = yes

    is_triggered_only = yes

    trigger = {
        has_valid_civic = civic_citizen_service
    }

    immediate = {
        add_modifier = { modifier = military_junta_war_lost years = 5 }
    }
}

# 和平乌托邦
namespace = eci_civic_peaceful_republic
country_event = {
    id = eci_civic_peaceful_republic.0
    hide_window = yes

    is_triggered_only = yes

    trigger = {
        has_valid_civic = civic_peaceful_republic
        NOR = {
            has_modifier = sustained_peace_1
            has_modifier = sustained_peace_2
            has_modifier = sustained_peace_3
            has_modifier = sustained_peace_4
            has_modifier = sustained_peace_5
        }
    }

    immediate = {
        country_event = { id = eci_civic_peaceful_republic.1 days = 3600 }
    }
}
country_event = {
    id = eci_civic_peaceful_republic.1
    hide_window = yes

    is_triggered_only = yes

    trigger = {
        has_valid_civic = civic_peaceful_republic
    }

    immediate = {
        add_modifier = { modifier = sustained_peace_1 years = -1 }
        country_event = { id = eci_civic_peaceful_republic.2 days = 3600 }
    }
}
country_event = {
    id = eci_civic_peaceful_republic.2
    hide_window = yes

    is_triggered_only = yes

    trigger = {
        has_valid_civic = civic_peaceful_republic
    }

    immediate = {
        remove_modifier = sustained_peace_1
        add_modifier = { modifier = sustained_peace_2 years = -1 }
        country_event = { id = eci_civic_peaceful_republic.3 days = 3600 }
    }
}
country_event = {
    id = eci_civic_peaceful_republic.3
    hide_window = yes

    is_triggered_only = yes

    trigger = {
        has_valid_civic = civic_peaceful_republic
    }

    immediate = {
        remove_modifier = sustained_peace_2
        add_modifier = { modifier = sustained_peace_3 years = -1 }
        country_event = { id = eci_civic_peaceful_republic.4 days = 3600 }
    }
}
country_event = {
    id = eci_civic_peaceful_republic.4
    hide_window = yes

    is_triggered_only = yes

    trigger = {
        has_valid_civic = civic_peaceful_republic
    }

    immediate = {
        remove_modifier = sustained_peace_3
        add_modifier = { modifier = sustained_peace_4 years = -1 }
        country_event = { id = eci_civic_peaceful_republic.5 days = 3600 }
    }
}
country_event = {
    id = eci_civic_peaceful_republic.5
    hide_window = yes

    is_triggered_only = yes

    trigger = {
        has_valid_civic = civic_peaceful_republic
    }

    immediate = {
        remove_modifier = sustained_peace_4
        add_modifier = { modifier = sustained_peace_5 years = -1 }
    }
}
country_event = {
    id = eci_civic_peaceful_republic.6
    hide_window = yes

    is_triggered_only = yes

    trigger = {
        OR = {
            has_modifier = sustained_peace_1
            has_modifier = sustained_peace_2
            has_modifier = sustained_peace_3
            has_modifier = sustained_peace_4
            has_modifier = sustained_peace_5
        }
    }

    immediate = {
        remove_modifier = sustained_peace_1
        remove_modifier = sustained_peace_2
        remove_modifier = sustained_peace_3
        remove_modifier = sustained_peace_4
        remove_modifier = sustained_peace_5
    }
}
country_event = {
    id = eci_civic_peaceful_republic.7
    hide_window = yes

    is_triggered_only = yes

    trigger = {
        NOT = { has_valid_civic = civic_peaceful_republic }
        OR = {
            has_modifier = sustained_peace_1
            has_modifier = sustained_peace_2
            has_modifier = sustained_peace_3
            has_modifier = sustained_peace_4
            has_modifier = sustained_peace_5
        }
    }

    immediate = {
        remove_modifier = sustained_peace_1
        remove_modifier = sustained_peace_2
        remove_modifier = sustained_peace_3
        remove_modifier = sustained_peace_4
        remove_modifier = sustained_peace_5
    }
}

# 和平防卫军
namespace = eci_civic_peace_defense_forces
country_event = {
    id = eci_civic_peace_defense_forces.1
    hide_window = yes

    is_triggered_only = yes

    trigger = {
        is_peace_defense_forces_country = yes
        is_at_war = yes
        any_war = {
            any_defender = {
                is_same_value = this
            }
        }
    }

    immediate = {
        add_modifier = { modifier = peace_defense_forces_1 days = -1 }
    }
}
country_event = {
    id = eci_civic_peace_defense_forces.2
    hide_window = yes

    is_triggered_only = yes

    trigger = {
        is_peace_defense_forces_country = yes
        is_at_war = yes
        any_war = {
            any_defender = {
                NOT = { is_same_value = this }
            }
        }
    }

    immediate = {
        add_modifier = { modifier = peace_defense_forces_2 days = -1 }
    }
}
country_event = {
    id = eci_civic_peace_defense_forces.3
    hide_window = yes

    is_triggered_only = yes

    trigger = {
        is_peace_defense_forces_country = yes
        is_at_war = no
    }

    immediate = {
        remove_modifier = peace_defense_forces_1
        remove_modifier = peace_defense_forces_2
    }
}
planet_event = {
    id = eci_civic_peace_defense_forces.4
    hide_window = yes

    is_triggered_only = yes

    trigger = {
        any_ground_combat_defender = {
            is_same_value = root.owner
        }
        owner = {
            is_peace_defense_forces_country = yes
        }
    }

    immediate = {
        random_list = {
            33 = {
                create_army = {
                    name = "ultraman_plural"
                    owner = root.owner
                    type = "ultraman"
                }
                modifier = {
                    add = 67
                    is_capital = yes
                }
            }
            67 = {
                modifier = {
                    factor = 0
                    is_capital = yes
                    planet.owner = {
                        NOT = { has_origin = origin_ultraman }
                    }
                }
                modifier = {
                    add = 34
                    planet.owner = { has_origin = origin_ultraman }
                }
            }
        }
    }
}
country_event = {
    id = eci_civic_peace_defense_forces.5
    hide_window = yes

    is_triggered_only = yes

    trigger = {
        any_owned_army = { army_type = ultraman }
    }

    immediate = {
        every_owned_planet = {
            limit = { has_ground_combat = no }
            every_planet_army = {
                limit = { army_type = ultraman }
                leader = {
                    unassign_leader = this
                }
                remove_army = yes
            }
        }
    }
}

# 超凡入圣
namespace = eci_transcendence
country_event = {
    id = eci_transcendence.0
    hide_window = yes
    is_triggered_only = yes
    trigger = { has_civic = civic_transcendence }
    immediate = {
        start_situation = { type = transcendence_technology }
    }
}
country_event = {
    id = eci_transcendence.1
    hide_window = yes
    is_triggered_only = yes
    immediate = {
        start_situation = {
            type = transcendence_technology
            target = root
        }
        add_random_research_option = {
            add_progress = 1
            ignore_prereqs = no
            ignore_rare = no
            area = engineering
            tier = 1
            fail_effects = {
                add_random_research_option = {
                    add_progress = 1
                    ignore_prereqs = no
                    ignore_rare = no
                    area = engineering
                    tier = 2
                    fail_effects = {
                        add_random_research_option = {
                            add_progress = 1
                            ignore_prereqs = no
                            ignore_rare = no
                            area = engineering
                            tier = 3
                            fail_effects = {
                                add_random_research_option = {
                                    add_progress = 1
                                    ignore_prereqs = no
                                    ignore_rare = no
                                    area = engineering
                                    tier = 4
                                    fail_effects = {
                                        add_random_research_option = {
                                            add_progress = 1
                                            ignore_prereqs = no
                                            ignore_rare = no
                                            area = engineering
                                            tier = 5
                                            fail_effects = {
                                                add_random_research_option = {
                                                    add_progress = 1
                                                    ignore_prereqs = no
                                                    ignore_rare = no
                                                    area = engineering
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        add_random_research_option = {
            add_progress = 1
            ignore_prereqs = no
            area = physics
            tier = 1
            fail_effects = {
                add_random_research_option = {
                    add_progress = 1
                    ignore_prereqs = no
                    area = physics
                    tier = 2
                    fail_effects = {
                        add_random_research_option = {
                            add_progress = 1
                            ignore_prereqs = no
                            area = physics
                            tier = 3
                            fail_effects = {
                                add_random_research_option = {
                                    add_progress = 1
                                    ignore_prereqs = no
                                    area = physics
                                    tier = 4
                                    fail_effects = {
                                        add_random_research_option = {
                                            add_progress = 1
                                            ignore_prereqs = no
                                            area = physics
                                            tier = 5
                                            fail_effects = {
                                                add_random_research_option = {
                                                    add_progress = 1
                                                    ignore_prereqs = no
                                                    ignore_rare = no
                                                    area = physics
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
        add_random_research_option = {
            add_progress = 1
            ignore_prereqs = no
            area = society
            tier = 1
            fail_effects = {
                add_random_research_option = {
                    add_progress = 1
                    ignore_prereqs = no
                    ignore_rare = no
                    area = society
                    tier = 2
                    fail_effects = {
                        add_random_research_option = {
                            add_progress = 1
                            ignore_prereqs = no
                            ignore_rare = no
                            area = society
                            tier = 3
                            fail_effects = {
                                add_random_research_option = {
                                    add_progress = 1
                                    ignore_prereqs = no
                                    ignore_rare = no
                                    area = society
                                    tier = 4
                                    fail_effects = {
                                        add_random_research_option = {
                                            add_progress = 1
                                            ignore_prereqs = no
                                            ignore_rare = no
                                            area = society
                                            tier = 5
                                            fail_effects = {
                                                add_random_research_option = {
                                                    add_progress = 1
                                                    ignore_prereqs = no
                                                    ignore_rare = no
                                                    area = society
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}

# 论坛水友
namespace = eci_civic_forum_friends
event = {
    id = eci_civic_forum_friends.1
    hide_window = yes
    is_triggered_only = yes

    immediate = {
        random_country = {
            limit = {
                OR = {
                    is_ai = no
                    has_country_flag = enion
                }
                OR = {
                    has_civic = civic_forum_friends
                    has_civic = civic_forum_friends_corporate
                }
            }
            save_event_target_as = civic_forum_friends_player
            set_country_flag = civic_forum_friends_locked
        }

        every_country = {
            limit = {
                any_country = {
                    OR = {
                        has_civic = civic_forum_friends
                        has_civic = civic_forum_friends_corporate
                    }
                }
            }
            if = {
                limit = {
                    OR = {
                        has_civic = civic_forum_friends
                        has_civic = civic_forum_friends_corporate
                    }
                }
                set_country_flag = civic_forum_friends_locked
                set_country_flag = first_contact_event
                set_country_flag = Story2
                give_technology = {
                    message = no
                    tech = tech_federal_state
                }
                join_alliance = { who = event_target:civic_forum_friends_player override_requirements = yes }
            }
            if = {
                limit = {
                    is_ai = no
                    OR = {
                        has_civic = civic_forum_friends
                        has_civic = civic_forum_friends_corporate
                    }
                }
                federation = {
                    set_federation_leader = root
                    set_name = NAME_forum_friends
                    add_federation_experience = 600
                    add_cohesion = 100
                }
                country_event = { id = origin.57 days = 2 }
            }
        }
    }
}

# 星星之火
namespace = eci_civic_firing_torch
country_event = {
    id = eci_civic_firing_torch.1
    hide_window = yes
    is_triggered_only = yes
    trigger = {
        has_valid_civic = civic_firing_torch
    }
    immediate = {
        save_global_event_target_as = firing_torch_old_country
        if = {
            limit = {
                NOT = {
                    any_country = {
                        has_country_flag = fusheng_empire_firing_torch
                    }
                }
            }
            create_country = {
                type = default
                name_list = random
                species = root.owner_main_species
                flag = event_target:firing_torch_old_country
                effect = {
                    #复活后弹窗
                    country_event = {
                        id = eci_civic_firing_torch.2
                        days = 30
                    }
                    add_resource = {
                        energy = 20000
                        minerals = 20000
                        influence = 800
                        alloys = 10000
                        food = 10000 #just in case
                        consumer_goods = 5000 #just in case
                        rare_crystals = 1000
                        volatile_motes = 1000
                        exotic_gases = 1000
                        sr_dark_matter = 100
                    }
                    set_name = root
                    set_timed_country_flag = {
                        flag = fusheng_empire_firing_torch
                        days = 30
                    }
                    copy_ethos_and_authority = root
                    copy_flags_and_variables_from = root
                    force_add_civic = civic_firing_torch
                    copy_techs_from = {
                        target = root
                    }
                    save_global_event_target_as = firing_torch_new_country
                    if = {
                        limit = {
                            any_playable_country = {
                                is_ai = yes
                                is_socialism = no
                                num_owned_planets > 0
                                any_owned_pop = {
                                    OR = {
                                        is_enslaved = yes
                                        has_ethic = ethic_socialism
                                    }
                                }
                            }
                        }
                        random_playable_country = {
                            limit = {
                                is_ai = yes
                                is_gestalt = no
                                is_socialism = no
                                num_owned_planets > 0
                                any_owned_pop = {
                                    OR = {
                                        is_enslaved = yes
                                        has_ethic = ethic_socialism
                                    }
                                }
                            }
                            event_target:firing_torch_new_country = {
                                declare_war = {
                                    target = prev
                                    attacker_war_goal = wg_galactic_revolution
                                }
                                add_modifier = {
                                    modifier = revolution_ai_buff
                                    days = 1800
                                }
                            }
                            random_owned_planet = {
                                starbase = {
                                    set_owner = event_target:firing_torch_new_country
                                }
                                set_owner = event_target:firing_torch_new_country
                                while = {
                                    count = 8
                                    create_pop = {
                                        species = event_target:firing_torch_new_country.owner_main_species
                                        ethos = { ethic = ethic_socialism }
                                    }
                                }
                                save_event_target_as = revolution_planet
                                every_owned_pop = {
                                    if = {
                                        limit = {
                                            OR = {
                                                has_trait = trait_latent_psionic
                                                has_trait = trait_psionic
                                            }
                                        }
                                        planet = {
                                            create_army = {
                                                type = psionic_militia_army
                                                species = prev.species
                                                owner = event_target:firing_torch_new_country
                                            }
                                        }
                                    }
                                    else = {
                                        planet = {
                                            create_army = {
                                                type = militia_army
                                                species = prev.species
                                                owner = event_target:firing_torch_new_country
                                            }
                                        }
                                    }
                                }
                            }
                            create_fleet_from_naval_cap = 1
                            last_created_fleet = {
                                set_owner = event_target:firing_torch_new_country
                                set_location = event_target:revolution_planet
                            }
                            event_target:firing_torch_old_country = {
                                every_controlled_fleet = {
                                    limit = {
                                        is_mobile = yes
                                    }
                                    set_owner = event_target:firing_torch_new_country
                                    set_location = event_target:revolution_planet
                                }
                            }
                            every_owned_planet = {
                                limit = {
                                    any_owned_pop = {
                                        pop_has_happiness = yes
                                        happiness < 1
                                    }
                                }
                                planet_event = {
                                    id = eci_civic_firing_torch.3
                                    days = 30
                                }
                            }
                        }
                    }
                    else_if = {
                        limit = {
                            any_system = {
                                any_system_planet = {
                                    has_owner = no
                                    is_colonizable = yes
                                }
                            }
                        }
                        random_system = {
                            limit = {
                                any_system_planet = {
                                    has_owner = no
                                    is_colonizable = yes
                                }
                            }
                            create_starbase = {
                                size = starbase_citadel
                                owner = event_target:firing_torch_new_country
                                module = shipyard
                                module = shipyard
                                module = shipyard
                                module = anchorage
                                module = anchorage
                                module = anchorage
                                building = titan_yards
                                building = colossus_yards
                                building = fleet_academy
                                building = naval_logistics_office
                            }
                            random_system_planet = {
                                limit = {
                                    has_owner = no
                                    is_colonizable = yes
                                    is_a_planet_megastructure = no
                                }
                                create_colony = {
                                    owner = event_target:firing_torch_new_country
                                    species = event_target:firing_torch_new_country.owner_main_species
                                    ethos = { ethic = ethic_socialism }
                                }
                                change_pc = pc_gaia
                                add_district = district_city
                                add_district = district_city
                                add_district = district_farming
                                add_district = district_mining
                                add_district = district_generator
                                add_building = building_capital
                                add_building = building_research_lab_1
                                add_building = building_foundry_1
                                add_building = building_factory_1
                                while = {
                                    limit = {
                                        num_pops < 8
                                        free_housing > 0
                                    }
                                    create_pop = {
                                        species = event_target:firing_torch_new_country.owner_main_species
                                        ethos = { ethic = ethic_socialism }
                                    }
                                }
                            }
                            create_fleet = {
                                effect = {
                                    set_owner = root
                                    set_location = root.capital_scope
                                    while = {
                                        count = 20
                                        create_ship = {
                                            name = HUMAN4_FLEET_RevolutionaryFleet
                                            random_existing_design = corvette
                                        }
                                    }
                                    owner = {
                                        create_leader = {
                                            class = commander
                                            name = random
                                            species = owner_main_species
                                        }
                                    }
                                    last_created_leader = {
                                        if = {
                                            limit = {
                                                has_skill > 1
                                                num_traits = 0
                                            }
                                            add_trait_no_notify = random_common
                                        }
                                    }
                                    set_leader = last_created_leader
                                }
                            }
                        }
                    }
                    else = {
                        random_system = {
                            limit = {
                                any_system_planet = {
                                    has_owner = no
                                    is_star = no
                                    is_asteroid = no
                                    NOT = {
                                        is_planet_class = pc_gas_giant
                                    }
                                    is_a_planet_megastructure = no
                                }
                            }
                            create_starbase = {
                                size = starbase_citadel
                                owner = event_target:firing_torch_new_country
                                module = shipyard
                                module = shipyard
                                module = shipyard
                                module = shipyard
                                module = shipyard
                                module = shipyard
                                building = titan_yards
                                building = colossus_yards
                                building = fleet_academy
                                building = crew_quarters
                            }
                            random_system_planet = {
                                limit = {
                                    has_owner = no
                                    is_star = no
                                    is_asteroid = no
                                    NOT = {
                                        is_planet_class = pc_gas_giant
                                    }
                                    is_a_planet_megastructure = no
                                }
                                change_pc = pc_gaia
                                create_colony = {
                                    owner = event_target:firing_torch_new_country
                                    species = event_target:firing_torch_new_country.owner_main_species
                                    ethos = { ethic = ethic_socialism }
                                }
                                add_district = district_city
                                add_district = district_city
                                add_district = district_farming
                                add_district = district_mining
                                add_district = district_generator
                                add_building = building_capital
                                add_building = building_research_lab_1
                                add_building = building_foundry_1
                                add_building = building_factory_1
                                while = {
                                    limit = {
                                        num_pops < 8
                                        free_housing > 0
                                    }
                                    create_pop = {
                                        species = event_target:firing_torch_new_country.owner_main_species
                                        ethos = { ethic = ethic_socialism }
                                    }
                                }
                            }
                            create_fleet = {
                                effect = {
                                    set_owner = root
                                    set_location = root.capital_scope
                                    while = {
                                        count = 20
                                        create_ship = {
                                            name = HUMAN4_FLEET_RevolutionaryFleet
                                            random_existing_design = corvette
                                        }
                                    }
                                    owner = {
                                        create_leader = {
                                            class = commander
                                            name = random
                                            species = owner_main_species
                                        }
                                    }
                                    last_created_leader = {
                                        if = {
                                            limit = {
                                                has_skill > 1
                                                num_traits = 0
                                            }
                                            add_trait_no_notify = random_common
                                        }
                                    }
                                    set_leader = last_created_leader
                                }
                            }
                        }
                    }
                    event_target:firing_torch_new_country = {
                        if = {
                            limit = {
                                root = { is_ai = no }
                            }
                            set_player = root
                        }
                    }
                }
            }
        }
    }
}

country_event = {
    id = eci_civic_firing_torch.2
    title = eci_civic_firing_torch.2.name
    desc = eci_civic_firing_torch.2.desc
    picture = GFX_evt_victorious_army
    is_triggered_only = yes
    immediate = {
    }
    option = {
        name = eci_civic_firing_torch.2.a
        custom_tooltip = eci_civic_firing_torch.2.tooltip
    }
}

planet_event = {
    id = eci_civic_firing_torch.3
    hide_window = yes
    is_triggered_only = yes
    immediate = {
        every_owned_pop = {
            random_list = {
                0 = {
                    add = trigger:happiness
                    modifier = {
                        factor = 0

                    }
                }
                1 = {
                    subtract = trigger:happiness
                    add_modifier = {
                        modifier = modifier_mobilization_pop_2
                    }
                    if = {
                        limit = {
                            OR = {
                                has_trait = trait_latent_psionic
                                has_trait = trait_psionic
                            }
                        }
                        planet = {
                            create_army = {
                                type = psionic_militia_army
                                species = prev.species
                                owner = event_target:firing_torch_new_country
                            }
                        }
                    }
                    else = {
                        planet = {
                            create_army = {
                                type = militia_army
                                species = prev.species
                                owner = event_target:firing_torch_new_country
                            }
                        }
                    }
                }
            }
        }
    }
}

