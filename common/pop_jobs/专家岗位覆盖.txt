
#官僚
bureaucrat = {
    category = specialist

    swappable_data = {
        default = {
            condition_string = SPECIALIST_JOB_TRIGGER
            building_icon = building_bureaucratic_1
        }
        swap_type = {
            trigger = {
                bureaucrat_is_manager = yes
            }
            name = manager
            desc = manager
            icon = manager
            building_icon = building_bureaucratic_1
            condition_string = SPECIALIST_JOB_TRIGGER
            weight = 2
        }
        swap_type = {
            trigger = {
                bureaucrat_is_priest = yes
            }
            name = priest
            desc = priest
            icon = priest
            building_icon = building_temple
            condition_string = SPECIALIST_JOB_TRIGGER
            weight = 5
        }
        swap_type = {
            trigger = {
                bureaucrat_is_steward = yes
            }
            name = steward
            desc = steward
            icon = manager
            building_icon = building_bureaucratic_1
            condition_string = SPECIALIST_JOB_TRIGGER
            weight = 10
        }
        swap_type = {
            trigger = {
                bureaucrat_is_preacher = yes
            }
            name = preacher
            desc = preacher
            icon = numistic_priest
            building_icon = building_temple
            condition_string = SPECIALIST_JOB_TRIGGER
            weight = 15
        }
        swap_type = {
            trigger = {
                bureaucrat_is_media_worker = yes
            }
            name = media_worker
            desc = media_worker
            icon = media_worker
            building_icon = building_bureaucratic_1
            condition_string = SPECIALIST_JOB_TRIGGER
            weight = 20
        }
        swap_type = {
            trigger = {
                bureaucrat_is_numistic_priest = yes
            }
            name = numistic_priest
            desc = numistic_priest
            icon = numistic_priest
            building_icon = building_nuumismatic_shrine
            condition_string = SPECIALIST_JOB_TRIGGER
            weight = 20
        }
        swap_type = {
            trigger = {
                bureaucrat_is_unifier = yes
            }
            name = unifier
            desc = unifier
            icon = overlord_propagandist
            building_icon = building_capital
            condition_string = SPECIALIST_JOB_TRIGGER
            weight = 25
        }
        swap_type = {
            trigger = {
                bureaucrat_is_culture_worker = yes
            }
            name = culture_worker
            desc = culture_worker
            icon = culture_worker
            building_icon = building_artist_patron
            condition_string = SPECIALIST_JOB_TRIGGER
            weight = 30
        }
        swap_type = {
            trigger = {
                bureaucrat_is_death_priest = yes
            }
            name = death_priest
            desc = death_priest
            icon = death_priest
            building_icon = building_sacrificial_temple_1
            condition_string = SPECIALIST_JOB_TRIGGER
            weight = 35
        }
        swap_type = {
            trigger = {
                bureaucrat_is_low_tech = yes
            }
            name = low_tech_bureaucrat
            desc = low_tech_bureaucrat
            icon = low_tech_bureaucrat
            building_icon = building_low_tech_admin_hub
            condition_string = SPECIALIST_JOB_TRIGGER
            weight = 40
        }
        swap_type = {
            trigger = {
                bureaucrat_is_low_tech_manager = yes
            }
            name = low_tech_manager
            desc = low_tech_manager
            icon = manager
            building_icon = building_low_tech_admin_hub
            condition_string = SPECIALIST_JOB_TRIGGER
            weight = 45
        }
        swap_type = {
            trigger = {
                bureaucrat_is_low_tech_priest = yes
            }
            name = low_tech_priest
            desc = low_tech_priest
            icon = low_tech_priest
            building_icon = building_low_tech_admin_hub
            condition_string = SPECIALIST_JOB_TRIGGER
            weight = 50
        }
        swap_type = {
            trigger = {
                bureaucrat_is_memorialist = yes
            }
            name = memorialist
            desc = memorialist
            icon = death_chronicler
            building_icon = building_galactic_memorial_1
            condition_string = SPECIALIST_JOB_TRIGGER
            weight = 200
        }
        swap_type = {
            trigger = {
                bureaucrat_is_death_priest = yes
                bureaucrat_is_manager = yes
            }
            name = death_manager
            desc = death_manager
            icon = manager
            building_icon = building_temple
            condition_string = SPECIALIST_JOB_TRIGGER
            weight = 300
        }
        swap_type = {
            trigger = {
                bureaucrat_is_haruspex = yes
            }
            name = haruspex
            desc = haruspex
            icon = haruspex
            building_icon = building_the_sanctum_of_augmentation
            condition_string = SPECIALIST_JOB_TRIGGER
            weight = 400
        }
        swap_type = {
            trigger = {
                politician_swappable_job = yes
            }
            name = re_augur
            icon = priest
            desc = re_augur
            weight = 500
        }
        inline_script = MECR/jobs/imperial_official_swap_type
    }
    tags = { unity }

    possible_pre_triggers = {
        has_owner = yes
        is_being_purged = no
        is_being_assimilated = no
        is_sapient = yes
    }

    possible_precalc = can_fill_specialist_job
    possible = {
        complex_specialist_job_check_trigger = yes
    }

    resources = {
        category = planet_bureaucrats
        # PRODUCES
        produces = {
            unity = 4
        }
        upkeep = {
            consumer_goods = 2
            trade = 1
        }
        ##Government Swaps
        produces = {
            trigger = {
                bureaucrat_is_manager = yes
            }
            trade = 2
        }
        produces = {
            trigger = {
                bureaucrat_is_steward = yes
            }
            trade = 1
        }
        produces = {
            trigger = {
                bureaucrat_is_preacher = yes
            }
            unity = -1
            trade = 2
        }
        produces = {
            trigger = {
                bureaucrat_is_death_priest = yes
            }
            unity = -1
            society_research = 1
        }
        produces = {
            trigger = {
                bureaucrat_is_haruspex = yes
            }
            unity = -1
            engineering_research = 2
        }
        ##Broken Shackles
        produces = {
            trigger = {
                exists = planet
                planet = {
                    bureaucrat_is_low_tech = yes
                }
            }
            unity = -2
        }
        upkeep = {
            trigger = {
                exists = planet
                planet = {
                    bureaucrat_is_low_tech = yes
                }
            }
            consumer_goods = -1
        }
        produces = {
            trigger = {
                exists = planet
                planet = {
                    bureaucrat_is_low_tech_manager = yes
                }
            }
            unity = -2
            trade = 2
        }
        upkeep = {
            trigger = {
                exists = planet
                planet = {
                    bureaucrat_is_low_tech_manager = yes
                }
            }
            consumer_goods = -1
        }
        produces = {
            trigger = {
                exists = planet
                planet = {
                    bureaucrat_is_low_tech_priest = yes
                }
            }
            unity = -2
        }
        upkeep = {
            trigger = {
                exists = planet
                planet = {
                    bureaucrat_is_low_tech_priest = yes
                }
            }
            consumer_goods = -1
            trade = -1
        }
        ##Event Swaps
        upkeep = {
            trigger = {
                bureaucrat_is_unifier = yes
            }
            consumer_goods = -1
        }
        # Job Swap - Numistic Priests
        produces = {
            trigger = {
                exists = planet
                planet = {
                    bureaucrat_is_numistic_priest = yes
                }
            }
            unity = -2
            trade = 6
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_valid_civic = civic_liberation_theology
                    is_lithoid = no
                    NOT = {
                        has_country_flag = synthetic_empire
                    }
                }
            }
            minerals = 2
            food = 3
            unity = 2
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_valid_civic = civic_liberation_theology
                    is_lithoid = yes
                    NOT = {
                        has_country_flag = synthetic_empire
                    }
                }
            }
            minerals = 4
            unity = 2
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_valid_civic = civic_liberation_theology
                    has_country_flag = synthetic_empire
                }
            }
            minerals = 2
            energy = 3
            unity = 2
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_tradition = tr_piety_nature_and_humanity
                }
            }
            physics_research = 0.5
            engineering_research = 0.5
            society_research = 0.5
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_valid_civic = civic_knowledge_seeker
                }
            }
            unity = -1
            physics_research = 1
            engineering_research = 1
            society_research = 1
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_valid_civic = civic_Fertility_worship
                }
            }
            unity = 1
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_valid_civic = civic_The_Druid_Way
                }
            }
            society_research = 2
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_valid_civic = civic_colonial_government
                }
                any_country = {
                    has_diplo_migration_treaty = root.owner
                }
            }
            unity = 2
        }
        produces = {
            trigger = {
                bureaucrat_is_culture_worker = yes
                exists = owner
                owner = {
                    has_valid_civic = civic_spirit_of_kneeling
                    has_modifier = overlord_ethics_compatibility
                }
            }
            trade = 5
        }
    }

    ## 贪污腐败
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                NOT = { has_valid_civic = civic_communist_society }
            }
        }
        pop_ethic_egalitarian_attraction_mult = -0.05
        planet_bureaucrats_trade_upkeep_add = 0.1
    }

    ## 帝国规模
    inline_script = "jobs/job_bureaucrat_country_admin_modifiers"

    ## Amenities
    triggered_planet_modifier = {
        potential = {
            bureaucrat_is_priest = yes
        }
        planet_amenities_add = 200
        mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
    }
    triggered_planet_modifier = {
        potential = {
            bureaucrat_is_steward = yes
        }
        planet_amenities_add = 100
        mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
    }
    triggered_planet_modifier = {
        potential = {
            bureaucrat_is_steward = yes
            has_councilor = { COUNCILOR = councilor_worker_coop }
        }
        planet_amenities_add = 25
        mult = value:scripted_modifier_councilor_level_mult|MODIFIER|pop_job_amenities_mult|TYPE|councilor_worker_coop|
    }
    triggered_planet_modifier = {
        potential = {
            bureaucrat_is_preacher = yes
        }
        planet_amenities_add = 200
        mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
    }
    triggered_planet_modifier = {
        potential = {
            bureaucrat_is_death_priest = yes
        }
        planet_amenities_add = 200
        mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
    }
    triggered_planet_modifier = {
        potential = {
            bureaucrat_is_unifier = yes
        }
        planet_amenities_add = 300
        mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
    }
    triggered_planet_modifier = {
        potential = {
            bureaucrat_is_low_tech_priest = yes
        }
        planet_amenities_add = 200
        mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
    }
    triggered_planet_modifier = {
        potential = {
            bureaucrat_is_numistic_priest = yes
        }
        planet_amenities_add = 200
        mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
    }
    triggered_planet_modifier = {
        potential = {
            bureaucrat_is_haruspex = yes
        }
        planet_amenities_add = 200
        mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
    }
    triggered_planet_modifier = {
        potential = {
            bureaucrat_is_culture_worker = yes
        }
        planet_amenities_add = 300
        mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
    }

    ##Stability
    triggered_planet_modifier = {
        potential = {
            bureaucrat_is_memorialist = yes
        }
        planet_stability_add = 0.5
    }

    ## Ethics Attraction
    triggered_planet_modifier = {
        potential = {
            bureaucrat_is_culture_worker = yes
        }
        pop_government_ethic_attraction = 0.10
    }

    triggered_planet_modifier = {
        potential = {
            planet = {
                has_active_building = building_league_offices
            }
        }
        planet_amenities_add = 100
        mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
    }

    triggered_country_modifier = {
        potential = {
            exists = owner
            owner = { has_valid_civic = civic_efficient_bureaucracy }
        }
        country_edict_fund_add = 2
        mult = value:job_total_output_modifier|JOB|bureaucrat|RESOURCE|unity|
    }

    triggered_planet_modifier = {
        potential = {
            planet = {
                exists = owner
                owner = {
                    has_tradition = tr_modularity_4
                }
            }
        }
        planet_jobs_worker_produces_mult = 0.02
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                OR = {
                    has_valid_civic = civic_philosopher_king
                    has_valid_civic = civic_peaceful_republic
                }
            }
        }
        planet_stability_add = 2
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { has_ethic = ethic_fanatic_spiritualist }
            OR = {
                bureaucrat_is_priest = yes
                bureaucrat_is_preacher = yes
                bureaucrat_is_numistic_priest = yes
                bureaucrat_is_death_priest = yes
            }
        }
        planetary_ascension_effect_mult = 0.02
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                OR = {
                    has_ethic = ethic_spiritualist
                    has_ethic = ethic_pragmatism
                }
            }
            OR = {
                bureaucrat_is_priest = yes
                bureaucrat_is_preacher = yes
                bureaucrat_is_numistic_priest = yes
                bureaucrat_is_death_priest = yes
            }
        }
        planetary_ascension_effect_mult = 0.01
    }

    triggered_country_modifier = {
        potential = {
            bureaucrat_is_media_worker = yes
        }
        country_edict_fund_add = 2
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                OR = {
                    has_valid_civic = civic_imperial_cult
                    has_valid_civic = civic_exalted_priesthood
                    has_valid_civic = civic_spiritual_democracy
                }
            }
        }
        planet_stability_add = 1
        species_empire_size_mult = -0.02
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_valid_civic = civic_Fertility_worship
            }
        }
        modifier = {
            planet_amenities_add = 50
            logistic_growth_mult = 0.025
        }
    }
    #神权政治
    triggered_country_modifier = {
        potential = {
            exists = owner
            owner = {
                OR = {
                    has_valid_civic = civic_imperial_cult
                    has_valid_civic = civic_exalted_priesthood
                    has_valid_civic = civic_spiritual_democracy
                }
            }
        }
        modifier = {
            country_edict_fund_add = 3
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_valid_civic = civic_The_Druid_Way
            }
        }
        modifier = {
            job_druid_add = 150
            pop_environment_tolerance = 0.02			#宜居度+2%
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_valid_civic = civic_The_Druid_Way
            }
        }
        modifier = {
            planet_amenities_add = 100
        }
        mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
    }
    triggered_planet_modifier = {
        potential = {
            OR = {
                bureaucrat_is_priest = yes
                bureaucrat_is_preacher = yes
                bureaucrat_is_numistic_priest = yes
                bureaucrat_is_death_priest = yes
            }
            exists = owner
            owner = {
                NOT = { has_valid_civic = civic_knowledge_seeker }
            }
        }
        modifier = {
            planet_researchers_engineering_research_produces_mult = -0.01
            planet_researchers_society_research_produces_mult = -0.01
            planet_researchers_physics_research_produces_mult = -0.01
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_valid_civic = civic_liberation_theology
            }
        }
        modifier = {
            planet_amenities_add = 100
        }
        mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_valid_civic = civic_magic_mirror
            }
        }
        planet_pops_trade_produces_mult = 0.05
        mult = value_num_rival_country
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_valid_civic = civic_art_country
            }
            bureaucrat_is_culture_worker = yes
        }
        planet_amenities_add = 500
        mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
    }

    weight = {
        weight = @specialist_job_weight
        mult = value:job_weights_modifier|JOB|bureaucrat|RESOURCE|unity|
        mult = value:scripted_modifier_job_weight_mult|MODIFIER|pop_job_amenities_mult|
        modifier = {
            factor = 0.2
            has_citizenship_rights = no
            NOT = { has_trait = trait_mechanical }
        }
        modifier = {
            factor = 2
            exists = owner
            owner = { has_civic = civic_exalted_priesthood }
        }
        modifier = {
            factor = 0.1
            can_take_servant_job = yes
        }
        modifier = {
            factor = 0.1
            is_enslaved = yes
            has_slavery_type = { type = slavery_indentured }
        }
    }

    inline_script = "jobs/automodding_priority_unity"

    inline_script = MECR/jobs/imperial_official_effects

    promotion = {
        time = @standard_promotion_time
        effect = {
            pop_amount_change_category = {
                CATEGORY = specialist
                AMOUNT = local_pop_amount
            }
        }
    }
}

#执法者
enforcer = {
    category = dystopian_specialist

    swappable_data = {
        default = {
            condition_string = BATTLE_THRALL_JOB_TRIGGER
            building_icon = building_precinct_house
        }
        swap_type = {
            trigger = {
                bureaucrat_is_media_worker = yes
            }
            name = enforcer_media_worker
            desc = media_worker
            icon = media_worker
            building_icon = building_precinct_house
            condition_string = SPECIALIST_JOB_TRIGGER
            weight = 2
        }
        swap_type = {
            trigger = {
                enforcer_is_educator_trigger = yes
            }
            name = educator
            desc = educator
            icon = educator
            building_icon = building_state_academy
            condition_string = BATTLE_THRALL_JOB_TRIGGER
            weight = 10
        }
    }

    tags = { crime enforcer }

    possible_pre_triggers = {
        has_owner = yes
        is_being_purged = no
        is_being_assimilated = no
        is_sapient = yes
    }

    possible = {
        battle_thrall_job_check_trigger = yes
    }

    resources = {
        category = planet_enforcers
        inline_script = "jobs/job_enforcer_triggered_resources"
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_valid_civic = civic_ultimate_collective
                }
            }
            unity = 5
        }
    }

    triggered_planet_modifier = {
        potential = {
            owner = { NOT = { has_valid_civic = civic_spirit_of_rule_by_man } }
        }
        planet_crime_add = -20
    }
    triggered_planet_modifier = {
        potential = { owner = { has_valid_civic = civic_spirit_of_rule_by_man } }
        planet_crime_add = -10
    }

    triggered_planet_modifier = {
        potential = {
            enforcer_is_educator_trigger = no
        }
        planet_crime_add = -25
        planet_defense_armies_add = 2
        planet_stability_add = 1
    }

    triggered_planet_modifier = {
        potential = {
            enforcer_is_educator_trigger = yes
        }
        planet_crime_add = -20
        planet_defense_armies_add = 1
        pop_government_ethic_attraction = 0.1
    }

    triggered_country_modifier = {
        potential = {
            exists = owner
            owner = { has_valid_civic = civic_anarchism }
        }
        country_edict_fund_add = 2
    }

    inline_script = "jobs/job_enforcer_additional_modifiers"

    weight = {
        weight = @specialist_job_weight

        modifier = {
            mult = value:job_weights_modifier|JOB|enforcer|RESOURCE|unity|FACTOR|0.25|
            owner = { has_active_tradition = tr_domination_judgment_corps }
        }
        modifier = {
            factor = 50
        }
        modifier = {
            factor = 0.2
            has_citizenship_rights = no
            NOT = { has_trait = trait_mechanical }
        }
        modifier = {
            factor = 2
            has_trait = trait_resilient
        }
        modifier = {
            factor = 2
            has_trait = trait_very_strong
        }
        modifier = {
            factor = 1.5
            has_trait = trait_strong
        }
        modifier = {
            factor = 10
            is_enslaved = yes
            has_slavery_type = { type = slavery_military }
        }
        modifier = {
            factor = 0.50
            has_trait = trait_weak
        }
        modifier = {
            factor = 0.1
            can_take_servant_job = yes
        }
        modifier = {
            factor = 1.1
            has_trait = trait_cybernetic
        }
        modifier = {
            factor = 2
            has_trait = trait_presapient_earthbound
        }
        modifier = {
            factor = 1.1
            has_trait = trait_limited_regeneration
        }
        modifier = {
            factor = 0.8
            is_enslaved = yes
            has_slavery_type = { type = slavery_indentured }
        }
        modifier = {
            factor = 2
            has_trait = trait_lithoid
        }
    }

    promotion = {
        time = @standard_promotion_time
        effect = {
            pop_amount_change_category = {
                CATEGORY = specialist
                AMOUNT = local_pop_amount
            }
        }
    }
}

#店主
trader = {
    category = specialist

    swappable_data = {
        default = {
            condition_string = SPECIALIST_JOB_TRIGGER
            building_icon = building_galactic_stock_exchange
            icon = overlord_trader
        }
    }

    tags = { trade amenities }

    possible_pre_triggers = {
        has_owner = yes
        is_being_purged = no
        is_being_assimilated = no
        is_sapient = yes
    }

    possible_precalc = can_fill_specialist_job

    resources = {
        category = planet_traders
        produces = {
            trade = 8
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_valid_civic = civic_colonial_government
                }
                any_country = {
                    has_commercial_pact = root.owner
                }
            }
            trade = -3
            influence = 0.1
        }
        upkeep = {
            consumer_goods = 1
        }
    }

    country_modifier = {
        trade_value_reduction = 0.01
        country_resource_max_trade_add = 100
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { has_tradition = tr_mercantile_commercial_enterprise }
        }
        planet_amenities_add = 200
        mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
    }

    triggered_planet_modifier = {
        potential = {
            exists = planet
            planet = {
                exists = orbital_defence
                orbital_defence = {
                    exists = starbase
                    starbase = {
                        has_starbase_building = ring_trade_hub
                    }
                }
            }
        }
        planet_amenities_add = 100
        mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
    }

    weight = {
        weight = @specialist_job_weight
        mult = value:job_weights_modifier|JOB|trader|RESOURCE|trade|
        mult = value:scripted_modifier_job_weight_mult|MODIFIER|pop_job_amenities_mult|
        # crisis purge
        modifier = {
            factor = 0.01
            exists = planet
            exists = planet.controller
            planet.controller = {
                OR = {
                    is_country_type = swarm
                    is_country_type = ai_empire
                }
            }
            OR = { # contingency won't purge itself
                NOT = { exists = event_target:custodian_bot }
                AND = {
                    exists = event_target:custodian_bot
                    NOT = { species = { is_same_value = event_target:custodian_bot } }
                }
            }
        }
    }

    inline_script = "jobs/automodding_priority_trade"

    promotion = {
        time = @standard_promotion_time
        effect = {
            pop_amount_change_category = {
                CATEGORY = specialist
                AMOUNT = local_pop_amount
            }
        }
    }
}

#骑士
knight = {
    category = specialist

    swappable_data = {
        default = {
            condition_string = SPECIALIST_JOB_TRIGGER
            building_icon = building_order_keep
        }
    }
    tags = { soldier unity research }

    possible_pre_triggers = {
        has_owner = yes
        is_being_purged = no
        is_being_assimilated = no
        #is_enslaved = no
    }

    possible_precalc = can_fill_specialist_job
    possible = {
        hidden_trigger = { exists = owner }
        owner = {
            is_gestalt = no
        }
        OR = {
            is_enslaved = no
            owner = { has_valid_civic = civic_du_contrat_social }
            owner = { has_valid_civic = civic_flower_of_evil }
        }
    }

    resources = {
        category = planet_knights
        produces = {
            trigger = { exists = owner }
            unity = 3
            mult = value:knights_unity_output_modifier
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_origin = origin_toxic_knights
                }
            }
            physics_research = 2
            engineering_research = 2
            society_research = 2
            mult = value:knights_research_output_modifier
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_country_flag = cosmogenesis_knights
                }
            }
            advanced_logic = 1
            mult = value:knights_research_output_modifier
        }
        upkeep = {
            alloys = 1
            trigger = {
                exists = owner
                owner = {
                    NOT = {
                        has_modifier = luminous_blades
                    }
                }
            }
        }
        upkeep = {
            consumer_goods = 1.5
        }
    }

    planet_modifier = {
        planet_defense_armies_add = 2
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                has_valid_civic = civic_cyber_dictatorship
            }
        }
        planet_knight_commanders_physics_research_produces_add = 1
        planet_knight_commanders_engineering_research_produces_add = 1
        planet_knight_commanders_society_research_produces_add = 1
    }

    triggered_planet_modifier = {
        potential = {
            owner = { has_country_flag = toxoids_7090_a }
        }
        planet_amenities_add = 500
        mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
    }

    country_modifier = {
        country_naval_cap_add = 4
        knight_quest_progress_add = 0.05
    }

    weight = {
        weight = @high_prio_specialist_job_weight
        factor = 1.2
        add = 5 #Somehow pops preferred to work as squires than as knights. No more.
        mult = value:job_weights_modifier|JOB|bureaucrat|RESOURCE|unity|
        mult = value:job_weights_research_modifier|JOB|knight|
    }

    inline_script = "jobs/automodding_priority_unity"

    promotion = {
        time = @standard_promotion_time
        effect = {
            pop_amount_change_category = {
                CATEGORY = specialist
                AMOUNT = local_pop_amount
            }
        }
    }
}

#士官
soldier = {
    category = specialist
    swappable_data = {
        default = {
            condition_string = SOLDIER_JOB_TRIGGER
            building_icon = building_stronghold
        }
        swap_type = {
            trigger = {
                exists = owner
                owner = { has_valid_civic = civic_private_militaries }
            }
            name = mercenary
            desc = mercenary
            weight = 20
        }
        swap_type = {
            trigger = {
                soldier_is_necromancer = yes
            }
            name = necromancer
            desc = necromancer
            icon = necromancer
            building_icon = building_dread_encampment
            weight = 50
        }
    }

    tags = { soldier }

    country_modifier = {
        country_naval_cap_add = 4
    }

    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = { has_valid_civic = civic_having_a_national_army }
        }
        pop_cat_worker_bonus_workforce_mult = 0.01
    }

    resources = {
        category = planet_soldiers
        inline_script = "output/soldier_output"
        produces = {
            trigger = {
                soldier_is_necromancer = yes
            }
            physics_research = 2
            society_research = 2
        }
        upkeep = {
            trigger = {
                soldier_is_necromancer = yes
            }
            consumer_goods = 1
        }
        produces = {
            trigger = {
                exists = owner
                owner = { has_valid_civic = civic_private_militaries }
            }
            trade = 2
        }
        upkeep = {
            trigger = {
                exists = owner
                owner = { has_valid_civic = civic_private_militaries }
            }
            consumer_goods = 1
        }
    }

    inline_script = "output/soldier_triggered_modifiers"

    possible_pre_triggers = {
        has_owner = yes
        is_being_purged = no
        is_being_assimilated = no
        is_sapient = yes
    }

    possible = {
        soldier_job_check_trigger = yes
        owner = { is_gestalt = no }
    }

    weight = {
        weight = @soldier_job_weight
        modifier = {
            factor = 10
            exists = planet
            planet = {
                exists = leader
                leader = {
                    leader_class = commander
                }
            }
        }
        modifier = {
            factor = 2
            has_trait = trait_resilient
        }
        modifier = {
            factor = 2
            has_trait = trait_very_strong
        }
        modifier = {
            factor = 1.5
            has_trait = trait_strong
        }
        modifier = {
            factor = 0.5
            has_trait = trait_weak
        }
        modifier = {
            factor = 0.1
            is_enslaved = yes
            NOT = { has_slavery_type = { type = slavery_military } }
        }
        modifier = {
            factor = 10
            is_enslaved = yes
            has_slavery_type = { type = slavery_military }
        }
        modifier = {
            factor = 0.1
            can_take_servant_job = yes
        }
        modifier = {
            factor = 1.1
            has_trait = trait_cybernetic
        }
        modifier = {
            factor = 2
            has_trait = trait_presapient_earthbound
        }
        modifier = {
            factor = 1.1
            has_trait = trait_limited_regeneration
        }
        modifier = {
            factor = 0
            species = { can_be_soldier = no }
        }
        modifier = {
            factor = 2
            has_trait = trait_lithoid
        }
        modifier = {
            factor = 5
            has_trait = trait_cyborg_creed_of_war
        }
    }

    promotion = {
        time = @standard_promotion_time
        effect = {
            pop_amount_change_category = {
                CATEGORY = worker
                AMOUNT = local_pop_amount
            }
        }
    }
}

#物理学家
physicist = {
    category = specialist
    swappable_data = {
        default = {
            condition_string = SPECIALIST_JOB_TRIGGER
            building_icon = building_research_lab_1
        }
        # Astrometeorologists
        swap_type = {
            trigger = {
                physicist_is_astrometeorologist_trigger = yes
            }
            name = astrometeorologist
            desc = astrometeorologist
            icon = astrometeorologist
            building_icon = building_astrometeorology_observation_center
            condition_string = SPECIALIST_JOB_TRIGGER
            weight = 5
        }
        # Astral Researcher
        swap_type = {
            trigger = {
                physicist_is_astral_researcher_trigger = yes
            }
            name = astral_researcher
            desc = astral_researcher
            icon = astral_researcher
            building_icon = building_astral_siphon_1
            weight = 5
        }
        # Space-Time Anomaly Researcher
        swap_type = {
            trigger = {
                physicist_is_space_time_researcher_trigger = yes
            }
            name = space_time_anomaly_researcher
            desc = space_time_anomaly_researcher
            weight = 10
        }
        # Dimension Portal Researcher
        swap_type = {
            trigger = {
                physicist_is_dimensional_portal_researcher_trigger = yes
            }
            name = dimensional_portal_researcher
            desc = dimensional_portal_researcher
            weight = 15
        }
        # Astral-Metrorologists
        swap_type = {
            trigger = {
                physicist_is_astral_researcher_trigger = yes
                physicist_is_astrometeorologist_trigger = yes
            }
            name = astral_meteorologist
            desc = astral_meteorologist
            icon = astrometeorologist
            building_icon = building_astral_siphon_1
            weight = 20
        }
        swap_type = {
            trigger = {
                researcher_is_magician = yes
            }
            name = elementalist
            desc = elementalist
            building_icon = building_mage_tower_1
            weight = 50
        }
    }

    tags = { research }

    possible_pre_triggers = {
        has_owner = yes
        is_being_purged = no
        is_being_assimilated = no
        is_sapient = yes
    }

    possible_precalc = can_fill_specialist_job
    possible = {
        complex_specialist_job_check_trigger = yes
    }


    triggered_country_modifier = {
        potential = {
            exists = owner
            owner = {
                has_valid_civic = civic_technocracy
            }
        }
        country_admin_cap_add = 0.2
    }

    triggered_country_modifier = {
        potential = {
            exists = planet
            planet = {
                has_designation = col_capital_research
            }
        }
        country_admin_cap_add = 5
    }
    triggered_pop_group_modifier = {
        potential = {
            exists = owner
            owner = {
                has_edict = commercializing_academic_resources
            }
        }
        modifier = {
            pop_happiness = -0.1
        }
    }
    triggered_pop_group_modifier = {
        potential = {
            exists = owner
            owner = {
                has_edict = academic_resources_open_access
            }
        }
        modifier = {
            pop_happiness = 0.1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                NOR = {
                    has_valid_civic = civic_knowledge_seeker
                    has_policy_flag = dogma_bottom_line
                }
            }
        }
        modifier = {
            planet_priests_produces_mult = -0.01
        }
    }
    triggered_country_modifier = {
        potential = {
            local_or_sector_governor_has_trait = {
                TRAIT = leader_trait_academia_recruiter
            }
        }
        country_naval_cap_add = 1
        mult = planet.modifier:job_researcher_naval_cap_add
    }

    resources = {
        category = planet_physicists
        produces = {
            physics_research = 6
        }
        # Astrometrorologists
        produces = {
            trigger = {
                exists = planet
                planet = {
                    physicist_is_astrometeorologist_trigger = yes
                    solar_system = {
                        OR = {
                            has_environmental_effects = yes
                            has_star_flag = storm_system
                        }
                    }
                }
            }
            physics_research = 4
        }
        produces = {
            trigger = {
                exists = planet
                planet = { has_modifier = ley_rift }
                exists = owner
                owner = {
                    has_origin = origin_wizarding_world
                }
            }
            physics_research = 6
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_civic = civic_dark_consortium
                }
            }
            physics_research = 6
        }
        upkeep = {
            trigger = {
                exists = planet
                planet = { NOT = { has_modifier = ley_rift } }
                exists = owner
                owner = {
                    has_origin = origin_wizarding_world
                }
            }
            astral_threads = 0.5
        }
        upkeep = {
            trigger = {
                exists = owner
                owner = {
                    has_civic = civic_dark_consortium
                }
            }
            sr_dark_matter = 0.5
        }
        upkeep = {
            consumer_goods = 1.5
        }
        # Space-Time Researcher
        produces = {
            trigger = {
                physicist_is_space_time_researcher_trigger = yes
            }
            physics_research = 2
            sr_dark_matter = 0.2
        }
        upkeep = {
            trigger = {
                physicist_is_space_time_researcher_trigger = yes
            }
            consumer_goods = 1.5
        }
        inline_script = "output/researcher_output"
    }

    overlord_resources = {
        category = planet_requisitioned_research
        produces = {
            trigger = {
                planet = {
                    has_planet_flag = has_science_ministry
                }
            }
            physics_research = 1.5
        }
        produces = {
            trigger = {
                planet = {
                    has_planet_flag = has_science_ministry
                    physicist_is_astrometeorologist_trigger = yes
                    solar_system = {
                        OR = {
                            has_environmental_effects = yes
                            has_star_flag = storm_system
                        }
                    }
                }
            }
            physics_research = 1
        }
    }

    # Dimensional Portal Amenities
    triggered_planet_modifier = {
        potential = {
            planet = {
                has_modifier = dportal_trade_normal
            }
        }
        planet_amenities_add = 600
        mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
    }
    triggered_planet_modifier = {
        potential = {
            planet = {
                has_modifier = dportal_trade_high
            }
        }
        planet_amenities_add = 1200
        mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
    }
    triggered_planet_modifier = {
        potential = {
            planet = {
                has_modifier = dportal_trade_low
            }
        }
        planet_amenities_add = 300
        mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
    }
    triggered_planet_modifier = {
        potential = {
            planet = {
                has_modifier = dportal_trade_crisis
            }
        }
        planet_amenities_add = 200
        mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
    }

    weight = {
        weight = @specialist_job_weight
        mult = value:job_weights_modifier|JOB|physicist|RESOURCE|physics_research|
        modifier = {
            factor = 0.2
            has_citizenship_rights = no
            NOT = { has_trait = trait_mechanical }
        }
        modifier = {
            factor = 2
            has_living_standard = { type = living_standard_academic_privilege }
        }
        modifier = {
            factor = 0.1
            can_take_servant_job = yes
        }
        modifier = {
            factor = 0.8
            is_enslaved = yes
            has_slavery_type = { type = slavery_indentured }
        }
        modifier = {
            factor = 5
            has_trait = trait_cyborg_creed_of_research
        }
    }

    inline_script = "jobs/automodding_priority_research"

    promotion = {
        time = @standard_promotion_time
        effect = {
            pop_amount_change_category = {
                CATEGORY = specialist
                AMOUNT = local_pop_amount
            }
        }
    }
}

#生物学家
biologist = {
    category = specialist

    swappable_data = {
        default = {
            condition_string = SPECIALIST_JOB_TRIGGER
            building_icon = building_research_lab_1
        }
        # Rangers
        swap_type = {
            trigger = {
                biologist_is_ranger_trigger = yes
            }
            name = ranger
            desc = ranger
            icon = ranger
            building_icon = holding_park_ranger_lodge
            weight = 5
        }
        # Vent Reseachers
        swap_type = {
            trigger = {
                biologist_is_vent_researcher_trigger = yes
            }
            name = stratovent_researcher
            desc = stratovent_researcher
            icon = xeno_zoo_keeper
            building_icon = building_nanolab_1
            weight = 10
        }
        # Zookeepers
        swap_type = {
            trigger = {
                biologist_is_zookeeper_trigger = yes
            }
            name = xeno_zoo_keeper
            desc = xeno_zoo_keeper
            icon = xeno_zoo_keeper
            building_icon = building_xeno_zoo
            weight = 15
        }
        # Archaeo-Engineers
        swap_type = {
            trigger = {
                biologist_is_archaeo_engineer_trigger = yes
            }
            name = archaeoengineers
            desc = archaeoengineers
            icon = archaeoengineers
            building_icon = building_archaeostudies_faculty
            weight = 20
        }
        swap_type = {
            trigger = {
                researcher_is_magician = yes
            }
            name = natural_shaman
            desc = natural_shaman
            building_icon = building_mage_tower_1
            weight = 50
        }
    }

    possible_pre_triggers = {
        has_owner = yes
        is_being_purged = no
        is_being_assimilated = no
        is_sapient = yes
    }

    possible_precalc = can_fill_specialist_job
    possible = {
        complex_specialist_job_check_trigger = yes
    }


    triggered_country_modifier = {
        potential = {
            exists = owner
            owner = {
                has_valid_civic = civic_technocracy
            }
        }
        country_admin_cap_add = 0.2
    }

    triggered_country_modifier = {
        potential = {
            exists = planet
            planet = {
                has_designation = col_capital_research
            }
        }
        country_admin_cap_add = 5
    }
    triggered_pop_group_modifier = {
        potential = {
            exists = owner
            owner = {
                has_edict = commercializing_academic_resources
            }
        }
        modifier = {
            pop_happiness = -0.1
        }
    }
    triggered_pop_group_modifier = {
        potential = {
            exists = owner
            owner = {
                has_edict = academic_resources_open_access
            }
        }
        modifier = {
            pop_happiness = 0.1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                NOR = {
                    has_valid_civic = civic_knowledge_seeker
                    has_policy_flag = dogma_bottom_line
                }
            }
        }
        modifier = {
            planet_priests_produces_mult = -0.01
        }
    }
    triggered_country_modifier = {
        potential = {
            local_or_sector_governor_has_trait = {
                TRAIT = leader_trait_academia_recruiter
            }
        }
        country_naval_cap_add = 1
        mult = planet.modifier:job_researcher_naval_cap_add
    }

    resources = {
        category = planet_biologists
        produces = {
            society_research = 6
        }
        produces = {
            trigger = {
                biologist_is_zookeeper_trigger = yes
            }
            society_research = 1
        }
        produces = {
            trigger = {
                exists = planet
                planet = { has_modifier = ley_rift }
                exists = owner
                owner = {
                    has_origin = origin_wizarding_world
                }
            }
            society_research = 6
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_civic = civic_dark_consortium
                }
            }
            society_research = 6
        }
        upkeep = {
            trigger = {
                exists = planet
                planet = { NOT = { has_modifier = ley_rift } }
                exists = owner
                owner = {
                    has_origin = origin_wizarding_world
                }
            }
            astral_threads = 0.5
        }
        upkeep = {
            trigger = {
                exists = owner
                owner = {
                    has_civic = civic_dark_consortium
                }
            }
            sr_dark_matter = 0.5
        }
        upkeep = {
            consumer_goods = 0.5
        }
        upkeep = {
            trigger = {
                biologist_is_zookeeper_trigger = yes
            }
            consumer_goods = 1.5
        }
        inline_script = "output/researcher_output"
    }

    overlord_resources = {
        category = planet_requisitioned_research
        produces = {
            trigger = {
                planet = {
                    has_planet_flag = has_science_ministry
                }
            }
            society_research = 1.5
        }
    }

    # Job Swap - Rangers
    triggered_planet_modifier = {
        potential = {
            biologist_is_ranger_trigger = yes
        }
        planet_amenities_add = 300
        mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
    }

    # Job Swap - Vent Researchers
    triggered_planet_modifier = {
        potential = {
            biologist_is_vent_researcher_trigger = yes
        }
        planet_amenities_add = 300
        mult = value:scripted_modifier_mult|MODIFIER|pop_job_amenities_mult|
    }

    # Job Swap - Zookeepers
    triggered_planet_modifier = {
        potential = {
            biologist_is_zookeeper_trigger = yes
        }
        planet_amenities_add = 100
        mult = value:zoo_keeper_amenity_output ##TODO FIX new way we count pops
    }

    weight = {
        weight = @specialist_job_weight
        mult = value:job_weights_modifier|JOB|biologist|RESOURCE|society_research|
        modifier = {
            factor = 0.2
            has_citizenship_rights = no
            NOT = { has_trait = trait_mechanical }
        }
        modifier = {
            factor = 2
            has_living_standard = { type = living_standard_academic_privilege }
        }
        modifier = {
            factor = 0.1
            can_take_servant_job = yes
        }
        modifier = {
            factor = 0.8
            is_enslaved = yes
            has_slavery_type = { type = slavery_indentured }
        }
        modifier = {
            factor = 5
            has_trait = trait_cyborg_creed_of_research
        }
    }

    inline_script = "jobs/automodding_priority_research"

    promotion = {
        time = @standard_promotion_time
        effect = {
            pop_amount_change_category = {
                CATEGORY = specialist
                AMOUNT = local_pop_amount
            }
        }
    }
}

#工程学家
engineer = {
    category = specialist

    swappable_data = {
        default = {
            condition_string = SPECIALIST_JOB_TRIGGER
            building_icon = building_research_lab_1
        }
        # Dismantler
        swap_type = {
            trigger = {
                engineer_is_manufactorium_scraper_trigger = yes
            }
            name = manufactorium_scraper
            desc = manufactorium_scraper
            icon = broken_shackles_scavenger
            building_icon = building_research_lab_1
            weight = 5
        }
        # Munitions Decommissioner
        swap_type = {
            trigger = {
                engineer_is_munitions_decommissioner_trigger = yes
            }
            name = munitions_decommissioner
            desc = munitions_decommissioner
            icon = munitions_decommissioner
            building_icon = building_research_lab_1
            weight = 10
        }
        swap_type = {
            trigger = {
                researcher_is_magician = yes
            }
            name = magician_scholar
            desc = magician_scholar
            building_icon = building_mage_tower_1
            weight = 50
        }
    }

    possible_pre_triggers = {
        has_owner = yes
        is_being_purged = no
        is_being_assimilated = no
        is_sapient = yes
    }

    possible_precalc = can_fill_specialist_job
    possible = {
        complex_specialist_job_check_trigger = yes
    }

    triggered_country_modifier = {
        potential = {
            exists = owner
            owner = {
                has_valid_civic = civic_technocracy
            }
        }
        country_admin_cap_add = 0.2
    }

    triggered_country_modifier = {
        potential = {
            exists = planet
            planet = {
                has_designation = col_capital_research
            }
        }
        country_admin_cap_add = 5
    }
    triggered_pop_group_modifier = {
        potential = {
            exists = owner
            owner = {
                has_edict = commercializing_academic_resources
            }
        }
        modifier = {
            pop_happiness = -0.1
        }
    }
    triggered_pop_group_modifier = {
        potential = {
            exists = owner
            owner = {
                has_edict = academic_resources_open_access
            }
        }
        modifier = {
            pop_happiness = 0.1
        }
    }
    triggered_planet_modifier = {
        potential = {
            exists = owner
            owner = {
                NOR = {
                    has_valid_civic = civic_knowledge_seeker
                    has_policy_flag = dogma_bottom_line
                }
            }
        }
        modifier = {
            planet_priests_produces_mult = -0.01
        }
    }
    triggered_country_modifier = {
        potential = {
            local_or_sector_governor_has_trait = {
                TRAIT = leader_trait_academia_recruiter
            }
        }
        country_naval_cap_add = 1
        mult = planet.modifier:job_researcher_naval_cap_add
    }

    resources = {
        category = planet_engineers
        produces = {
            engineering_research = 6
        }
        produces = {
            trigger = {
                exists = planet
                planet = { has_modifier = ley_rift }
                exists = owner
                owner = {
                    has_origin = origin_wizarding_world
                }
            }
            engineering_research = 6
        }
        produces = {
            trigger = {
                exists = owner
                owner = {
                    has_civic = civic_dark_consortium
                }
            }
            engineering_research = 6
        }
        upkeep = {
            trigger = {
                exists = planet
                planet = { NOT = { has_modifier = ley_rift } }
                exists = owner
                owner = {
                    has_origin = origin_wizarding_world
                }
            }
            astral_threads = 0.5
        }
        upkeep = {
            trigger = {
                exists = owner
                owner = {
                    has_civic = civic_dark_consortium
                }
            }
            sr_dark_matter = 0.5
        }
        upkeep = {
            consumer_goods = 1.5
        }
        inline_script = "output/researcher_output"
    }

    overlord_resources = {
        category = planet_requisitioned_research
        produces = {
            trigger = {
                planet = {
                    has_planet_flag = has_science_ministry
                }
            }
            engineering_research = 1
        }
    }

    weight = {
        weight = @specialist_job_weight
        mult = value:job_weights_modifier|JOB|engineer|RESOURCE|engineering_research|
        modifier = {
            factor = 0.2
            has_citizenship_rights = no
            NOT = { has_trait = trait_mechanical }
        }
        modifier = {
            factor = 2
            has_living_standard = { type = living_standard_academic_privilege }
        }
        modifier = {
            factor = 0.1
            can_take_servant_job = yes
        }
        modifier = {
            factor = 0.8
            is_enslaved = yes
            has_slavery_type = { type = slavery_indentured }
        }
        modifier = {
            factor = 5
            has_trait = trait_cyborg_creed_of_research
        }
    }

    inline_script = "jobs/automodding_priority_research"

    promotion = {
        time = @standard_promotion_time
        effect = {
            pop_amount_change_category = {
                CATEGORY = specialist
                AMOUNT = local_pop_amount
            }
        }
    }
}