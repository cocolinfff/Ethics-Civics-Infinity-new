# 自动发布工作流说明

## 功能概述

此 GitHub Actions 工作流实现了以下功能：

1. 每月1号自动运行检查
2. 检查仓库是否有新的提交
3. 如果有更新，则自动生成 Release 和更新日志
4. 可以使用 LLM API（如 OpenAI）生成更智能的更新公告

## 工作流详情

- **触发条件**：
  - 每月1号 UTC 时间 0 点自动运行
  - 可以通过 GitHub 界面手动触发

- **工作流程**：
  1. 检查代码仓库中的最新提交
  2. 与上一个 Release 版本进行比较
  3. 如果有新的提交，则生成更新日志
  4. 调用 LLM API 优化更新公告（可选）
  5. 创建新的 Release

## 配置说明

### 基础配置（必需）

工作流会自动运行，无需额外配置。

### 高级配置（可选）

要启用 LLM 自动生成更新公告功能，需要在仓库设置中添加 Secrets：

1. 转到仓库的 Settings
2. 点击 Secrets and variables → Actions
3. 添加新的 repository secret:
   - Name: `OPENAI_API_KEY`
   - Value: 你的 OpenAI API 密钥

支持的 LLM API:
- OpenAI GPT 系列模型
- 其他兼容 OpenAI API 格式的模型

## 版本号规则

版本号格式为 `YYYY.MM.N`：
- YYYY: 当前年份
- MM: 当前月份
- N: 修订号（默认为1）

例如：`2025.07.1` 表示 2025 年 7 月的第一次发布。

## 故障处理

如果自动发布失败，可以通过以下方式处理：

1. 检查 GitHub Actions 日志找出错误原因
2. 修复问题后可以手动重新运行工作流
3. 或者手动创建 Release

## 注意事项

1. 工作流使用 UTC 时间，可能与本地时间有差异
2. 如果一个月内多次更新，只会发布一个月度 Release
3. 首次运行时，由于没有历史 Release，会基于所有历史提交生成更新日志